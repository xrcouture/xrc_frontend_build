{"version":3,"file":"static/js/58.1147cfa1.chunk.js","mappings":"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","sources":["../node_modules/src/controls/OrbitControls.ts","../node_modules/@react-three/drei/core/OrbitControls.js","../node_modules/src/objects/GroundProjectedEnv.ts","../node_modules/src/loaders/RGBELoader.js","../node_modules/@react-three/drei/helpers/environment-assets.js","../node_modules/@react-three/drei/core/useEnvironment.js","../node_modules/@react-three/drei/core/Environment.js","../node_modules/src/shaders/HorizontalBlurShader.ts","../node_modules/src/shaders/VerticalBlurShader.ts","../node_modules/@react-three/drei/core/ContactShadows.js","../node_modules/@react-three/drei/core/Center.js","../node_modules/@react-three/drei/core/shaderMaterial.js","../node_modules/@react-three/drei/materials/DiscardMaterial.js","../node_modules/@react-three/drei/core/AccumulativeShadows.js","../node_modules/@react-three/drei/core/Bounds.js","../node_modules/@react-three/drei/core/Stage.js","../node_modules/react-use-measure/dist/web.js","../node_modules/its-fine/src/index.tsx","../node_modules/@react-three/fiber/dist/react-three-fiber.esm.js","../node_modules/debounce/index.js","../node_modules/@babel/runtime/helpers/esm/extends.js"],"sourcesContent":["import {\n  EventDispatcher,\n  Matrix4,\n  MOUSE,\n  OrthographicCamera,\n  PerspectiveCamera,\n  Quaternion,\n  Spherical,\n  TOUCH,\n  Vector2,\n  Vector3,\n  Ray,\n  Plane,\n} from 'three'\n\nconst _ray = new Ray()\nconst _plane = new Plane()\nconst TILT_LIMIT = Math.cos(70 * (Math.PI / 180))\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst moduloWrapAround = (offset: number, capacity: number) => ((offset % capacity) + capacity) % capacity\n\nclass OrbitControls extends EventDispatcher {\n  object: PerspectiveCamera | OrthographicCamera\n  domElement: HTMLElement | undefined\n  // Set to false to disable this control\n  enabled = true\n  // \"target\" sets the location of focus, where the object orbits around\n  target = new Vector3()\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  minDistance = 0\n  maxDistance = Infinity\n  // How far you can zoom in and out ( OrthographicCamera only )\n  minZoom = 0\n  maxZoom = Infinity\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  minPolarAngle = 0 // radians\n  maxPolarAngle = Math.PI // radians\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n  minAzimuthAngle = -Infinity // radians\n  maxAzimuthAngle = Infinity // radians\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  enableDamping = false\n  dampingFactor = 0.05\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  enableZoom = true\n  zoomSpeed = 1.0\n  // Set to false to disable rotating\n  enableRotate = true\n  rotateSpeed = 1.0\n  // Set to false to disable panning\n  enablePan = true\n  panSpeed = 1.0\n  screenSpacePanning = true // if false, pan orthogonal to world-space direction camera.up\n  keyPanSpeed = 7.0 // pixels moved per arrow key push\n  zoomToCursor = false\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  autoRotate = false\n  autoRotateSpeed = 2.0 // 30 seconds per orbit when fps is 60\n  reverseOrbit = false // true if you want to reverse the orbit to mouse drag from left to right = orbits left\n  reverseHorizontalOrbit = false // true if you want to reverse the horizontal orbit direction\n  reverseVerticalOrbit = false // true if you want to reverse the vertical orbit direction\n  // The four arrow keys\n  keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' }\n  // Mouse buttons\n  mouseButtons: Partial<{\n    LEFT: MOUSE\n    MIDDLE: MOUSE\n    RIGHT: MOUSE\n  }> = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.DOLLY,\n    RIGHT: MOUSE.PAN,\n  }\n  // Touch fingers\n  touches: Partial<{\n    ONE: TOUCH\n    TWO: TOUCH\n  }> = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN }\n  target0: Vector3\n  position0: Vector3\n  zoom0: number\n  // the target DOM element for key events\n  _domElementKeyEvents: any = null\n\n  getPolarAngle: () => number\n  getAzimuthalAngle: () => number\n  setPolarAngle: (x: number) => void\n  setAzimuthalAngle: (x: number) => void\n  getDistance: () => number\n\n  listenToKeyEvents: (domElement: HTMLElement) => void\n  stopListenToKeyEvents: () => void\n  saveState: () => void\n  reset: () => void\n  update: () => void\n  connect: (domElement: HTMLElement) => void\n  dispose: () => void\n\n  constructor(object: PerspectiveCamera | OrthographicCamera, domElement?: HTMLElement) {\n    super()\n\n    this.object = object\n    this.domElement = domElement\n\n    // for reset\n    this.target0 = this.target.clone()\n    this.position0 = this.object.position.clone()\n    this.zoom0 = this.object.zoom\n\n    //\n    // public methods\n    //\n\n    this.getPolarAngle = (): number => spherical.phi\n\n    this.getAzimuthalAngle = (): number => spherical.theta\n\n    this.setPolarAngle = (value: number): void => {\n      // use modulo wrapping to safeguard value\n      let phi = moduloWrapAround(value, 2 * Math.PI)\n      let currentPhi = spherical.phi\n\n      // convert to the equivalent shortest angle\n      if (currentPhi < 0) currentPhi += 2 * Math.PI\n      if (phi < 0) phi += 2 * Math.PI\n      let phiDist = Math.abs(phi - currentPhi)\n      if (2 * Math.PI - phiDist < phiDist) {\n        if (phi < currentPhi) {\n          phi += 2 * Math.PI\n        } else {\n          currentPhi += 2 * Math.PI\n        }\n      }\n      sphericalDelta.phi = phi - currentPhi\n      scope.update()\n    }\n\n    this.setAzimuthalAngle = (value: number): void => {\n      // use modulo wrapping to safeguard value\n      let theta = moduloWrapAround(value, 2 * Math.PI)\n      let currentTheta = spherical.theta\n\n      // convert to the equivalent shortest angle\n      if (currentTheta < 0) currentTheta += 2 * Math.PI\n      if (theta < 0) theta += 2 * Math.PI\n      let thetaDist = Math.abs(theta - currentTheta)\n      if (2 * Math.PI - thetaDist < thetaDist) {\n        if (theta < currentTheta) {\n          theta += 2 * Math.PI\n        } else {\n          currentTheta += 2 * Math.PI\n        }\n      }\n      sphericalDelta.theta = theta - currentTheta\n      scope.update()\n    }\n\n    this.getDistance = (): number => scope.object.position.distanceTo(scope.target)\n\n    this.listenToKeyEvents = (domElement: HTMLElement): void => {\n      domElement.addEventListener('keydown', onKeyDown)\n      this._domElementKeyEvents = domElement\n    }\n\n    this.stopListenToKeyEvents = (): void => {\n      this._domElementKeyEvents.removeEventListener('keydown', onKeyDown)\n      this._domElementKeyEvents = null\n    }\n\n    this.saveState = (): void => {\n      scope.target0.copy(scope.target)\n      scope.position0.copy(scope.object.position)\n      scope.zoom0 = scope.object.zoom\n    }\n\n    this.reset = (): void => {\n      scope.target.copy(scope.target0)\n      scope.object.position.copy(scope.position0)\n      scope.object.zoom = scope.zoom0\n      scope.object.updateProjectionMatrix()\n\n      // @ts-ignore\n      scope.dispatchEvent(changeEvent)\n\n      scope.update()\n\n      state = STATE.NONE\n    }\n\n    // this method is exposed, but perhaps it would be better if we can make it private...\n    this.update = ((): (() => void) => {\n      const offset = new Vector3()\n      const up = new Vector3(0, 1, 0)\n\n      // so camera.up is the orbit axis\n      const quat = new Quaternion().setFromUnitVectors(object.up, up)\n      const quatInverse = quat.clone().invert()\n\n      const lastPosition = new Vector3()\n      const lastQuaternion = new Quaternion()\n\n      const twoPI = 2 * Math.PI\n\n      return function update(): boolean {\n        const position = scope.object.position\n\n        // update new up direction\n        quat.setFromUnitVectors(object.up, up)\n        quatInverse.copy(quat).invert()\n\n        offset.copy(position).sub(scope.target)\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat)\n\n        // angle from z-axis around y-axis\n        spherical.setFromVector3(offset)\n\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle())\n        }\n\n        if (scope.enableDamping) {\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor\n        } else {\n          spherical.theta += sphericalDelta.theta\n          spherical.phi += sphericalDelta.phi\n        }\n\n        // restrict theta to be between desired limits\n\n        let min = scope.minAzimuthAngle\n        let max = scope.maxAzimuthAngle\n\n        if (isFinite(min) && isFinite(max)) {\n          if (min < -Math.PI) min += twoPI\n          else if (min > Math.PI) min -= twoPI\n\n          if (max < -Math.PI) max += twoPI\n          else if (max > Math.PI) max -= twoPI\n\n          if (min <= max) {\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta))\n          } else {\n            spherical.theta =\n              spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta)\n          }\n        }\n\n        // restrict phi to be between desired limits\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi))\n        spherical.makeSafe()\n\n        // move target to panned location\n\n        if (scope.enableDamping === true) {\n          scope.target.addScaledVector(panOffset, scope.dampingFactor)\n        } else {\n          scope.target.add(panOffset)\n        }\n\n        // adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n        // we adjust zoom later in these cases\n        if ((scope.zoomToCursor && performCursorZoom) || (scope.object as OrthographicCamera).isOrthographicCamera) {\n          spherical.radius = clampDistance(spherical.radius)\n        } else {\n          spherical.radius = clampDistance(spherical.radius * scale)\n        }\n\n        offset.setFromSpherical(spherical)\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse)\n\n        position.copy(scope.target).add(offset)\n\n        if (!scope.object.matrixAutoUpdate) scope.object.updateMatrix()\n        scope.object.lookAt(scope.target)\n\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor\n          sphericalDelta.phi *= 1 - scope.dampingFactor\n\n          panOffset.multiplyScalar(1 - scope.dampingFactor)\n        } else {\n          sphericalDelta.set(0, 0, 0)\n\n          panOffset.set(0, 0, 0)\n        }\n\n        // adjust camera position\n        let zoomChanged = false\n        if (scope.zoomToCursor && performCursorZoom) {\n          let newRadius = null\n          if (scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) {\n            // move the camera down the pointer ray\n            // this method avoids floating point error\n            const prevRadius = offset.length()\n            newRadius = clampDistance(prevRadius * scale)\n\n            const radiusDelta = prevRadius - newRadius\n            scope.object.position.addScaledVector(dollyDirection, radiusDelta)\n            scope.object.updateMatrixWorld()\n          } else if ((scope.object as OrthographicCamera).isOrthographicCamera) {\n            // adjust the ortho camera position based on zoom changes\n            const mouseBefore = new Vector3(mouse.x, mouse.y, 0)\n            mouseBefore.unproject(scope.object)\n\n            scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / scale))\n            scope.object.updateProjectionMatrix()\n            zoomChanged = true\n\n            const mouseAfter = new Vector3(mouse.x, mouse.y, 0)\n            mouseAfter.unproject(scope.object)\n\n            scope.object.position.sub(mouseAfter).add(mouseBefore)\n            scope.object.updateMatrixWorld()\n\n            newRadius = offset.length()\n          } else {\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.')\n            scope.zoomToCursor = false\n          }\n\n          // handle the placement of the target\n          if (newRadius !== null) {\n            if (scope.screenSpacePanning) {\n              // position the orbit target in front of the new camera position\n              scope.target\n                .set(0, 0, -1)\n                .transformDirection(scope.object.matrix)\n                .multiplyScalar(newRadius)\n                .add(scope.object.position)\n            } else {\n              // get the ray and translation plane to compute target\n              _ray.origin.copy(scope.object.position)\n              _ray.direction.set(0, 0, -1).transformDirection(scope.object.matrix)\n\n              // if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n              // extremely large values\n              if (Math.abs(scope.object.up.dot(_ray.direction)) < TILT_LIMIT) {\n                object.lookAt(scope.target)\n              } else {\n                _plane.setFromNormalAndCoplanarPoint(scope.object.up, scope.target)\n                _ray.intersectPlane(_plane, scope.target)\n              }\n            }\n          }\n        } else if (scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera) {\n          zoomChanged = scale !== 1\n\n          if (zoomChanged) {\n            scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / scale))\n            scope.object.updateProjectionMatrix()\n          }\n        }\n\n        scale = 1\n        performCursorZoom = false\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n        ) {\n          // @ts-ignore\n          scope.dispatchEvent(changeEvent)\n\n          lastPosition.copy(scope.object.position)\n          lastQuaternion.copy(scope.object.quaternion)\n          zoomChanged = false\n\n          return true\n        }\n\n        return false\n      }\n    })()\n\n    // https://github.com/mrdoob/three.js/issues/20575\n    this.connect = (domElement: HTMLElement): void => {\n      if ((domElement as any) === document) {\n        console.error(\n          'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.',\n        )\n      }\n      scope.domElement = domElement\n      // disables touch scroll\n      // touch-action needs to be defined for pointer events to work on mobile\n      // https://stackoverflow.com/a/48254578\n      scope.domElement.style.touchAction = 'none'\n      scope.domElement.addEventListener('contextmenu', onContextMenu)\n      scope.domElement.addEventListener('pointerdown', onPointerDown)\n      scope.domElement.addEventListener('pointercancel', onPointerCancel)\n      scope.domElement.addEventListener('wheel', onMouseWheel)\n    }\n\n    this.dispose = (): void => {\n      scope.domElement?.removeEventListener('contextmenu', onContextMenu)\n      scope.domElement?.removeEventListener('pointerdown', onPointerDown)\n      scope.domElement?.removeEventListener('pointercancel', onPointerCancel)\n      scope.domElement?.removeEventListener('wheel', onMouseWheel)\n      scope.domElement?.ownerDocument.removeEventListener('pointermove', onPointerMove)\n      scope.domElement?.ownerDocument.removeEventListener('pointerup', onPointerUp)\n      if (scope._domElementKeyEvents !== null) {\n        scope._domElementKeyEvents.removeEventListener('keydown', onKeyDown)\n      }\n      //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n    }\n\n    //\n    // internals\n    //\n\n    const scope = this\n\n    const changeEvent = { type: 'change' }\n    const startEvent = { type: 'start' }\n    const endEvent = { type: 'end' }\n\n    const STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6,\n    }\n\n    let state = STATE.NONE\n\n    const EPS = 0.000001\n\n    // current position in spherical coordinates\n    const spherical = new Spherical()\n    const sphericalDelta = new Spherical()\n\n    let scale = 1\n    const panOffset = new Vector3()\n\n    const rotateStart = new Vector2()\n    const rotateEnd = new Vector2()\n    const rotateDelta = new Vector2()\n\n    const panStart = new Vector2()\n    const panEnd = new Vector2()\n    const panDelta = new Vector2()\n\n    const dollyStart = new Vector2()\n    const dollyEnd = new Vector2()\n    const dollyDelta = new Vector2()\n\n    const dollyDirection = new Vector3()\n    const mouse = new Vector2()\n    let performCursorZoom = false\n\n    const pointers: PointerEvent[] = []\n    const pointerPositions: { [key: string]: Vector2 } = {}\n\n    function getAutoRotationAngle(): number {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed\n    }\n\n    function getZoomScale(): number {\n      return Math.pow(0.95, scope.zoomSpeed)\n    }\n\n    function rotateLeft(angle: number): void {\n      if (scope.reverseOrbit || scope.reverseHorizontalOrbit) {\n        sphericalDelta.theta += angle\n      } else {\n        sphericalDelta.theta -= angle\n      }\n    }\n\n    function rotateUp(angle: number): void {\n      if (scope.reverseOrbit || scope.reverseVerticalOrbit) {\n        sphericalDelta.phi += angle\n      } else {\n        sphericalDelta.phi -= angle\n      }\n    }\n\n    const panLeft = (() => {\n      const v = new Vector3()\n\n      return function panLeft(distance: number, objectMatrix: Matrix4) {\n        v.setFromMatrixColumn(objectMatrix, 0) // get X column of objectMatrix\n        v.multiplyScalar(-distance)\n\n        panOffset.add(v)\n      }\n    })()\n\n    const panUp = (() => {\n      const v = new Vector3()\n\n      return function panUp(distance: number, objectMatrix: Matrix4) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1)\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0)\n          v.crossVectors(scope.object.up, v)\n        }\n\n        v.multiplyScalar(distance)\n\n        panOffset.add(v)\n      }\n    })()\n\n    // deltaX and deltaY are in pixels; right and down are positive\n    const pan = (() => {\n      const offset = new Vector3()\n\n      return function pan(deltaX: number, deltaY: number) {\n        const element = scope.domElement\n\n        if (element && scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) {\n          // perspective\n          const position = scope.object.position\n          offset.copy(position).sub(scope.target)\n          let targetDistance = offset.length()\n\n          // half of the fov is center to top of screen\n          targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0)\n\n          // we use only clientHeight here so aspect ratio does not distort speed\n          panLeft((2 * deltaX * targetDistance) / element.clientHeight, scope.object.matrix)\n          panUp((2 * deltaY * targetDistance) / element.clientHeight, scope.object.matrix)\n        } else if (element && scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera) {\n          // orthographic\n          panLeft(\n            (deltaX * (scope.object.right - scope.object.left)) / scope.object.zoom / element.clientWidth,\n            scope.object.matrix,\n          )\n          panUp(\n            (deltaY * (scope.object.top - scope.object.bottom)) / scope.object.zoom / element.clientHeight,\n            scope.object.matrix,\n          )\n        } else {\n          // camera neither orthographic nor perspective\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n          scope.enablePan = false\n        }\n      }\n    })()\n\n    function dollyOut(dollyScale: number) {\n      if (\n        (scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) ||\n        (scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera)\n      ) {\n        scale /= dollyScale\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n        scope.enableZoom = false\n      }\n    }\n\n    function dollyIn(dollyScale: number) {\n      if (\n        (scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) ||\n        (scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera)\n      ) {\n        scale *= dollyScale\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n        scope.enableZoom = false\n      }\n    }\n\n    function updateMouseParameters(event: MouseEvent): void {\n      if (!scope.zoomToCursor || !scope.domElement) {\n        return\n      }\n\n      performCursorZoom = true\n\n      const rect = scope.domElement.getBoundingClientRect()\n      const x = event.clientX - rect.left\n      const y = event.clientY - rect.top\n      const w = rect.width\n      const h = rect.height\n\n      mouse.x = (x / w) * 2 - 1\n      mouse.y = -(y / h) * 2 + 1\n\n      dollyDirection.set(mouse.x, mouse.y, 1).unproject(scope.object).sub(scope.object.position).normalize()\n    }\n\n    function clampDistance(dist: number): number {\n      return Math.max(scope.minDistance, Math.min(scope.maxDistance, dist))\n    }\n\n    //\n    // event callbacks - update the object state\n    //\n\n    function handleMouseDownRotate(event: MouseEvent) {\n      rotateStart.set(event.clientX, event.clientY)\n    }\n\n    function handleMouseDownDolly(event: MouseEvent) {\n      updateMouseParameters(event)\n      dollyStart.set(event.clientX, event.clientY)\n    }\n\n    function handleMouseDownPan(event: MouseEvent) {\n      panStart.set(event.clientX, event.clientY)\n    }\n\n    function handleMouseMoveRotate(event: MouseEvent) {\n      rotateEnd.set(event.clientX, event.clientY)\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed)\n\n      const element = scope.domElement\n\n      if (element) {\n        rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight) // yes, height\n        rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight)\n      }\n      rotateStart.copy(rotateEnd)\n      scope.update()\n    }\n\n    function handleMouseMoveDolly(event: MouseEvent) {\n      dollyEnd.set(event.clientX, event.clientY)\n      dollyDelta.subVectors(dollyEnd, dollyStart)\n\n      if (dollyDelta.y > 0) {\n        dollyOut(getZoomScale())\n      } else if (dollyDelta.y < 0) {\n        dollyIn(getZoomScale())\n      }\n\n      dollyStart.copy(dollyEnd)\n      scope.update()\n    }\n\n    function handleMouseMovePan(event: MouseEvent) {\n      panEnd.set(event.clientX, event.clientY)\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed)\n      pan(panDelta.x, panDelta.y)\n      panStart.copy(panEnd)\n      scope.update()\n    }\n\n    function handleMouseWheel(event: WheelEvent) {\n      updateMouseParameters(event)\n\n      if (event.deltaY < 0) {\n        dollyIn(getZoomScale())\n      } else if (event.deltaY > 0) {\n        dollyOut(getZoomScale())\n      }\n\n      scope.update()\n    }\n\n    function handleKeyDown(event: KeyboardEvent) {\n      let needsUpdate = false\n\n      switch (event.code) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed)\n          needsUpdate = true\n          break\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed)\n          needsUpdate = true\n          break\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0)\n          needsUpdate = true\n          break\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0)\n          needsUpdate = true\n          break\n      }\n\n      if (needsUpdate) {\n        // prevent the browser from scrolling on cursor keys\n        event.preventDefault()\n        scope.update()\n      }\n    }\n\n    function handleTouchStartRotate() {\n      if (pointers.length == 1) {\n        rotateStart.set(pointers[0].pageX, pointers[0].pageY)\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX)\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY)\n\n        rotateStart.set(x, y)\n      }\n    }\n\n    function handleTouchStartPan() {\n      if (pointers.length == 1) {\n        panStart.set(pointers[0].pageX, pointers[0].pageY)\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX)\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY)\n\n        panStart.set(x, y)\n      }\n    }\n\n    function handleTouchStartDolly() {\n      const dx = pointers[0].pageX - pointers[1].pageX\n      const dy = pointers[0].pageY - pointers[1].pageY\n      const distance = Math.sqrt(dx * dx + dy * dy)\n\n      dollyStart.set(0, distance)\n    }\n\n    function handleTouchStartDollyPan() {\n      if (scope.enableZoom) handleTouchStartDolly()\n      if (scope.enablePan) handleTouchStartPan()\n    }\n\n    function handleTouchStartDollyRotate() {\n      if (scope.enableZoom) handleTouchStartDolly()\n      if (scope.enableRotate) handleTouchStartRotate()\n    }\n\n    function handleTouchMoveRotate(event: PointerEvent) {\n      if (pointers.length == 1) {\n        rotateEnd.set(event.pageX, event.pageY)\n      } else {\n        const position = getSecondPointerPosition(event)\n        const x = 0.5 * (event.pageX + position.x)\n        const y = 0.5 * (event.pageY + position.y)\n        rotateEnd.set(x, y)\n      }\n\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed)\n\n      const element = scope.domElement\n\n      if (element) {\n        rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight) // yes, height\n        rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight)\n      }\n      rotateStart.copy(rotateEnd)\n    }\n\n    function handleTouchMovePan(event: PointerEvent) {\n      if (pointers.length == 1) {\n        panEnd.set(event.pageX, event.pageY)\n      } else {\n        const position = getSecondPointerPosition(event)\n        const x = 0.5 * (event.pageX + position.x)\n        const y = 0.5 * (event.pageY + position.y)\n        panEnd.set(x, y)\n      }\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed)\n      pan(panDelta.x, panDelta.y)\n      panStart.copy(panEnd)\n    }\n\n    function handleTouchMoveDolly(event: PointerEvent) {\n      const position = getSecondPointerPosition(event)\n      const dx = event.pageX - position.x\n      const dy = event.pageY - position.y\n      const distance = Math.sqrt(dx * dx + dy * dy)\n\n      dollyEnd.set(0, distance)\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed))\n      dollyOut(dollyDelta.y)\n      dollyStart.copy(dollyEnd)\n    }\n\n    function handleTouchMoveDollyPan(event: PointerEvent) {\n      if (scope.enableZoom) handleTouchMoveDolly(event)\n      if (scope.enablePan) handleTouchMovePan(event)\n    }\n\n    function handleTouchMoveDollyRotate(event: PointerEvent) {\n      if (scope.enableZoom) handleTouchMoveDolly(event)\n      if (scope.enableRotate) handleTouchMoveRotate(event)\n    }\n\n    //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n    function onPointerDown(event: PointerEvent) {\n      if (scope.enabled === false) return\n\n      if (pointers.length === 0) {\n        scope.domElement?.ownerDocument.addEventListener('pointermove', onPointerMove)\n        scope.domElement?.ownerDocument.addEventListener('pointerup', onPointerUp)\n      }\n\n      addPointer(event)\n\n      if (event.pointerType === 'touch') {\n        onTouchStart(event)\n      } else {\n        onMouseDown(event)\n      }\n    }\n\n    function onPointerMove(event: PointerEvent) {\n      if (scope.enabled === false) return\n\n      if (event.pointerType === 'touch') {\n        onTouchMove(event)\n      } else {\n        onMouseMove(event)\n      }\n    }\n\n    function onPointerUp(event: PointerEvent) {\n      removePointer(event)\n\n      if (pointers.length === 0) {\n        scope.domElement?.releasePointerCapture(event.pointerId)\n\n        scope.domElement?.ownerDocument.removeEventListener('pointermove', onPointerMove)\n        scope.domElement?.ownerDocument.removeEventListener('pointerup', onPointerUp)\n      }\n\n      // @ts-ignore\n      scope.dispatchEvent(endEvent)\n\n      state = STATE.NONE\n    }\n\n    function onPointerCancel(event: PointerEvent) {\n      removePointer(event)\n    }\n\n    function onMouseDown(event: MouseEvent) {\n      let mouseAction\n\n      switch (event.button) {\n        case 0:\n          mouseAction = scope.mouseButtons.LEFT\n          break\n\n        case 1:\n          mouseAction = scope.mouseButtons.MIDDLE\n          break\n\n        case 2:\n          mouseAction = scope.mouseButtons.RIGHT\n          break\n\n        default:\n          mouseAction = -1\n      }\n\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (scope.enableZoom === false) return\n          handleMouseDownDolly(event)\n          state = STATE.DOLLY\n          break\n\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false) return\n            handleMouseDownPan(event)\n            state = STATE.PAN\n          } else {\n            if (scope.enableRotate === false) return\n            handleMouseDownRotate(event)\n            state = STATE.ROTATE\n          }\n          break\n\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enableRotate === false) return\n            handleMouseDownRotate(event)\n            state = STATE.ROTATE\n          } else {\n            if (scope.enablePan === false) return\n            handleMouseDownPan(event)\n            state = STATE.PAN\n          }\n          break\n\n        default:\n          state = STATE.NONE\n      }\n\n      if (state !== STATE.NONE) {\n        // @ts-ignore\n        scope.dispatchEvent(startEvent)\n      }\n    }\n\n    function onMouseMove(event: MouseEvent) {\n      if (scope.enabled === false) return\n\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false) return\n          handleMouseMoveRotate(event)\n          break\n\n        case STATE.DOLLY:\n          if (scope.enableZoom === false) return\n          handleMouseMoveDolly(event)\n          break\n\n        case STATE.PAN:\n          if (scope.enablePan === false) return\n          handleMouseMovePan(event)\n          break\n      }\n    }\n\n    function onMouseWheel(event: WheelEvent) {\n      if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) {\n        return\n      }\n\n      event.preventDefault()\n\n      // @ts-ignore\n      scope.dispatchEvent(startEvent)\n\n      handleMouseWheel(event)\n\n      // @ts-ignore\n      scope.dispatchEvent(endEvent)\n    }\n\n    function onKeyDown(event: KeyboardEvent) {\n      if (scope.enabled === false || scope.enablePan === false) return\n      handleKeyDown(event)\n    }\n\n    function onTouchStart(event: PointerEvent) {\n      trackPointer(event)\n\n      switch (pointers.length) {\n        case 1:\n          switch (scope.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (scope.enableRotate === false) return\n              handleTouchStartRotate()\n              state = STATE.TOUCH_ROTATE\n              break\n\n            case TOUCH.PAN:\n              if (scope.enablePan === false) return\n              handleTouchStartPan()\n              state = STATE.TOUCH_PAN\n              break\n\n            default:\n              state = STATE.NONE\n          }\n\n          break\n\n        case 2:\n          switch (scope.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (scope.enableZoom === false && scope.enablePan === false) return\n              handleTouchStartDollyPan()\n              state = STATE.TOUCH_DOLLY_PAN\n              break\n\n            case TOUCH.DOLLY_ROTATE:\n              if (scope.enableZoom === false && scope.enableRotate === false) return\n              handleTouchStartDollyRotate()\n              state = STATE.TOUCH_DOLLY_ROTATE\n              break\n\n            default:\n              state = STATE.NONE\n          }\n\n          break\n\n        default:\n          state = STATE.NONE\n      }\n\n      if (state !== STATE.NONE) {\n        // @ts-ignore\n        scope.dispatchEvent(startEvent)\n      }\n    }\n\n    function onTouchMove(event: PointerEvent) {\n      trackPointer(event)\n\n      switch (state) {\n        case STATE.TOUCH_ROTATE:\n          if (scope.enableRotate === false) return\n          handleTouchMoveRotate(event)\n          scope.update()\n          break\n\n        case STATE.TOUCH_PAN:\n          if (scope.enablePan === false) return\n          handleTouchMovePan(event)\n          scope.update()\n          break\n\n        case STATE.TOUCH_DOLLY_PAN:\n          if (scope.enableZoom === false && scope.enablePan === false) return\n          handleTouchMoveDollyPan(event)\n          scope.update()\n          break\n\n        case STATE.TOUCH_DOLLY_ROTATE:\n          if (scope.enableZoom === false && scope.enableRotate === false) return\n          handleTouchMoveDollyRotate(event)\n          scope.update()\n          break\n\n        default:\n          state = STATE.NONE\n      }\n    }\n\n    function onContextMenu(event: Event) {\n      if (scope.enabled === false) return\n      event.preventDefault()\n    }\n\n    function addPointer(event: PointerEvent) {\n      pointers.push(event)\n    }\n\n    function removePointer(event: PointerEvent) {\n      delete pointerPositions[event.pointerId]\n\n      for (let i = 0; i < pointers.length; i++) {\n        if (pointers[i].pointerId == event.pointerId) {\n          pointers.splice(i, 1)\n          return\n        }\n      }\n    }\n\n    function trackPointer(event: PointerEvent) {\n      let position = pointerPositions[event.pointerId]\n\n      if (position === undefined) {\n        position = new Vector2()\n        pointerPositions[event.pointerId] = position\n      }\n\n      position.set(event.pageX, event.pageY)\n    }\n\n    function getSecondPointerPosition(event: PointerEvent) {\n      const pointer = event.pointerId === pointers[0].pointerId ? pointers[1] : pointers[0]\n      return pointerPositions[pointer.pointerId]\n    }\n\n    // connect events\n    if (domElement !== undefined) this.connect(domElement)\n    // force an update at start\n    this.update()\n  }\n}\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n  constructor(object: PerspectiveCamera | OrthographicCamera, domElement?: HTMLElement) {\n    super(object, domElement)\n\n    this.screenSpacePanning = false // pan orthogonal to world-space direction camera.up\n\n    this.mouseButtons.LEFT = MOUSE.PAN\n    this.mouseButtons.RIGHT = MOUSE.ROTATE\n\n    this.touches.ONE = TOUCH.PAN\n    this.touches.TWO = TOUCH.DOLLY_ROTATE\n  }\n}\n\nexport { OrbitControls, MapControls }\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as React from 'react';\nimport { OrbitControls as OrbitControls$1 } from 'three-stdlib';\n\nconst OrbitControls = /*#__PURE__*/React.forwardRef(({\n  makeDefault,\n  camera,\n  regress,\n  domElement,\n  enableDamping = true,\n  keyEvents = false,\n  onChange,\n  onStart,\n  onEnd,\n  ...restProps\n}, ref) => {\n  const invalidate = useThree(state => state.invalidate);\n  const defaultCamera = useThree(state => state.camera);\n  const gl = useThree(state => state.gl);\n  const events = useThree(state => state.events);\n  const setEvents = useThree(state => state.setEvents);\n  const set = useThree(state => state.set);\n  const get = useThree(state => state.get);\n  const performance = useThree(state => state.performance);\n  const explCamera = camera || defaultCamera;\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const controls = React.useMemo(() => new OrbitControls$1(explCamera), [explCamera]);\n  useFrame(() => {\n    if (controls.enabled) controls.update();\n  }, -1);\n  React.useEffect(() => {\n    if (keyEvents) {\n      controls.connect(keyEvents === true ? explDomElement : keyEvents);\n    }\n\n    controls.connect(explDomElement);\n    return () => void controls.dispose();\n  }, [keyEvents, explDomElement, regress, controls, invalidate]);\n  React.useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (regress) performance.regress();\n      if (onChange) onChange(e);\n    };\n\n    const onStartCb = e => {\n      if (onStart) onStart(e);\n    };\n\n    const onEndCb = e => {\n      if (onEnd) onEnd(e);\n    };\n\n    controls.addEventListener('change', callback);\n    controls.addEventListener('start', onStartCb);\n    controls.addEventListener('end', onEndCb);\n    return () => {\n      controls.removeEventListener('start', onStartCb);\n      controls.removeEventListener('end', onEndCb);\n      controls.removeEventListener('change', callback);\n    };\n  }, [onChange, onStart, onEnd, controls, invalidate, setEvents]);\n  React.useEffect(() => {\n    if (makeDefault) {\n      const old = get().controls;\n      set({\n        controls\n      });\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls,\n    enableDamping: enableDamping\n  }, restProps));\n});\n\nexport { OrbitControls };\n","import {\n  Mesh,\n  IcosahedronGeometry,\n  ShaderMaterial,\n  DoubleSide,\n  Texture,\n  CubeTexture,\n  BufferGeometry,\n  REVISION,\n} from 'three'\n\nexport interface GroundProjectedEnvParameters {\n  height?: number\n  radius?: number\n}\n\nconst isCubeTexture = (def: CubeTexture | Texture): def is CubeTexture => def && (def as CubeTexture).isCubeTexture\n\nexport class GroundProjectedEnv extends Mesh<BufferGeometry, ShaderMaterial> {\n  constructor(texture: CubeTexture | Texture, options?: GroundProjectedEnvParameters) {\n    const isCubeMap = isCubeTexture(texture)\n    const w = (isCubeMap ? texture.image[0]?.width : texture.image.width) ?? 1024\n    const cubeSize = w / 4\n    const _lodMax = Math.floor(Math.log2(cubeSize))\n    const _cubeSize = Math.pow(2, _lodMax)\n    const width = 3 * Math.max(_cubeSize, 16 * 7)\n    const height = 4 * _cubeSize\n\n    const defines = [\n      isCubeMap ? '#define ENVMAP_TYPE_CUBE' : '',\n      `#define CUBEUV_TEXEL_WIDTH ${1.0 / width}`,\n      `#define CUBEUV_TEXEL_HEIGHT ${1.0 / height}`,\n      `#define CUBEUV_MAX_MIP ${_lodMax}.0`,\n    ]\n\n    const vertexShader = /* glsl */ `\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        `\n    const fragmentShader =\n      defines.join('\\n') +\n      /* glsl */ `\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${parseInt(REVISION.replace(/\\D+/g, '')) >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>\n        }\n        `\n\n    const uniforms = {\n      map: { value: texture },\n      height: { value: options?.height || 15 },\n      radius: { value: options?.radius || 100 },\n    }\n\n    const geometry = new IcosahedronGeometry(1, 16)\n    const material = new ShaderMaterial({\n      uniforms,\n      fragmentShader,\n      vertexShader,\n      side: DoubleSide,\n    })\n\n    super(geometry, material)\n  }\n\n  set radius(radius: number) {\n    this.material.uniforms.radius.value = radius\n  }\n\n  get radius(): number {\n    return this.material.uniforms.radius.value\n  }\n\n  set height(height: number) {\n    this.material.uniforms.height.value = height\n  }\n\n  get height(): number {\n    return this.material.uniforms.height.value\n  }\n}\n","import { DataTextureLoader, DataUtils, FloatType, HalfFloatType, LinearFilter } from 'three'\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nclass RGBELoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager)\n\n    this.type = HalfFloatType\n  }\n\n  // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n  parse(buffer) {\n    const /* return codes for rgbe routines */\n      //RGBE_RETURN_SUCCESS = 0,\n      RGBE_RETURN_FAILURE = -1,\n      /* default error routine.  change this to change error handling */\n      rgbe_read_error = 1,\n      rgbe_write_error = 2,\n      rgbe_format_error = 3,\n      rgbe_memory_error = 4,\n      rgbe_error = function (rgbe_error_code, msg) {\n        switch (rgbe_error_code) {\n          case rgbe_read_error:\n            console.error('THREE.RGBELoader Read Error: ' + (msg || ''))\n            break\n          case rgbe_write_error:\n            console.error('THREE.RGBELoader Write Error: ' + (msg || ''))\n            break\n          case rgbe_format_error:\n            console.error('THREE.RGBELoader Bad File Format: ' + (msg || ''))\n            break\n          default:\n          case rgbe_memory_error:\n            console.error('THREE.RGBELoader: Error: ' + (msg || ''))\n        }\n\n        return RGBE_RETURN_FAILURE\n      },\n      /* offsets to red, green, and blue components in a data (float) pixel */\n      //RGBE_DATA_RED = 0,\n      //RGBE_DATA_GREEN = 1,\n      //RGBE_DATA_BLUE = 2,\n\n      /* number of floats per pixel, use 4 since stored in rgba image format */\n      //RGBE_DATA_SIZE = 4,\n\n      /* flags indicating which fields in an rgbe_header_info are valid */\n      RGBE_VALID_PROGRAMTYPE = 1,\n      RGBE_VALID_FORMAT = 2,\n      RGBE_VALID_DIMENSIONS = 4,\n      NEWLINE = '\\n',\n      fgets = function (buffer, lineLimit, consume) {\n        const chunkSize = 128\n\n        lineLimit = !lineLimit ? 1024 : lineLimit\n        let p = buffer.pos,\n          i = -1,\n          len = 0,\n          s = '',\n          chunk = String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)))\n\n        while (0 > (i = chunk.indexOf(NEWLINE)) && len < lineLimit && p < buffer.byteLength) {\n          s += chunk\n          len += chunk.length\n          p += chunkSize\n          chunk += String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)))\n        }\n\n        if (-1 < i) {\n          /*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n          if (false !== consume) buffer.pos += len + i + 1\n          return s + chunk.slice(0, i)\n        }\n\n        return false\n      },\n      /* minimal header reading.  modify if you want to parse more information */\n      RGBE_ReadHeader = function (buffer) {\n        // regexes to parse header info fields\n        const magic_token_re = /^#\\?(\\S+)/,\n          gamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n          exposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n          format_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n          dimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n          // RGBE format header struct\n          header = {\n            valid: 0 /* indicate which fields are valid */,\n\n            string: '' /* the actual header string */,\n\n            comments: '' /* comments found in header */,\n\n            programtype: 'RGBE' /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */,\n\n            format: '' /* RGBE format, default 32-bit_rle_rgbe */,\n\n            gamma: 1.0 /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */,\n\n            exposure: 1.0 /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */,\n\n            width: 0,\n            height: 0 /* image dimensions, width/height */,\n          }\n\n        let line, match\n\n        if (buffer.pos >= buffer.byteLength || !(line = fgets(buffer))) {\n          return rgbe_error(rgbe_read_error, 'no header found')\n        }\n\n        /* if you want to require the magic token then uncomment the next line */\n        if (!(match = line.match(magic_token_re))) {\n          return rgbe_error(rgbe_format_error, 'bad initial token')\n        }\n\n        header.valid |= RGBE_VALID_PROGRAMTYPE\n        header.programtype = match[1]\n        header.string += line + '\\n'\n\n        while (true) {\n          line = fgets(buffer)\n          if (false === line) break\n          header.string += line + '\\n'\n\n          if ('#' === line.charAt(0)) {\n            header.comments += line + '\\n'\n            continue // comment line\n          }\n\n          if ((match = line.match(gamma_re))) {\n            header.gamma = parseFloat(match[1])\n          }\n\n          if ((match = line.match(exposure_re))) {\n            header.exposure = parseFloat(match[1])\n          }\n\n          if ((match = line.match(format_re))) {\n            header.valid |= RGBE_VALID_FORMAT\n            header.format = match[1] //'32-bit_rle_rgbe';\n          }\n\n          if ((match = line.match(dimensions_re))) {\n            header.valid |= RGBE_VALID_DIMENSIONS\n            header.height = parseInt(match[1], 10)\n            header.width = parseInt(match[2], 10)\n          }\n\n          if (header.valid & RGBE_VALID_FORMAT && header.valid & RGBE_VALID_DIMENSIONS) break\n        }\n\n        if (!(header.valid & RGBE_VALID_FORMAT)) {\n          return rgbe_error(rgbe_format_error, 'missing format specifier')\n        }\n\n        if (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n          return rgbe_error(rgbe_format_error, 'missing image size specifier')\n        }\n\n        return header\n      },\n      RGBE_ReadPixels_RLE = function (buffer, w, h) {\n        const scanline_width = w\n\n        if (\n          // run length encoding is not allowed so read flat\n          scanline_width < 8 ||\n          scanline_width > 0x7fff ||\n          // this file is not run length encoded\n          2 !== buffer[0] ||\n          2 !== buffer[1] ||\n          buffer[2] & 0x80\n        ) {\n          // return the flat buffer\n          return new Uint8Array(buffer)\n        }\n\n        if (scanline_width !== ((buffer[2] << 8) | buffer[3])) {\n          return rgbe_error(rgbe_format_error, 'wrong scanline width')\n        }\n\n        const data_rgba = new Uint8Array(4 * w * h)\n\n        if (!data_rgba.length) {\n          return rgbe_error(rgbe_memory_error, 'unable to allocate buffer space')\n        }\n\n        let offset = 0,\n          pos = 0\n\n        const ptr_end = 4 * scanline_width\n        const rgbeStart = new Uint8Array(4)\n        const scanline_buffer = new Uint8Array(ptr_end)\n        let num_scanlines = h\n\n        // read in each successive scanline\n        while (num_scanlines > 0 && pos < buffer.byteLength) {\n          if (pos + 4 > buffer.byteLength) {\n            return rgbe_error(rgbe_read_error)\n          }\n\n          rgbeStart[0] = buffer[pos++]\n          rgbeStart[1] = buffer[pos++]\n          rgbeStart[2] = buffer[pos++]\n          rgbeStart[3] = buffer[pos++]\n\n          if (2 != rgbeStart[0] || 2 != rgbeStart[1] || ((rgbeStart[2] << 8) | rgbeStart[3]) != scanline_width) {\n            return rgbe_error(rgbe_format_error, 'bad rgbe scanline format')\n          }\n\n          // read each of the four channels for the scanline into the buffer\n          // first red, then green, then blue, then exponent\n          let ptr = 0,\n            count\n\n          while (ptr < ptr_end && pos < buffer.byteLength) {\n            count = buffer[pos++]\n            const isEncodedRun = count > 128\n            if (isEncodedRun) count -= 128\n\n            if (0 === count || ptr + count > ptr_end) {\n              return rgbe_error(rgbe_format_error, 'bad scanline data')\n            }\n\n            if (isEncodedRun) {\n              // a (encoded) run of the same value\n              const byteValue = buffer[pos++]\n              for (let i = 0; i < count; i++) {\n                scanline_buffer[ptr++] = byteValue\n              }\n              //ptr += count;\n            } else {\n              // a literal-run\n              scanline_buffer.set(buffer.subarray(pos, pos + count), ptr)\n              ptr += count\n              pos += count\n            }\n          }\n\n          // now convert data from buffer into rgba\n          // first red, then green, then blue, then exponent (alpha)\n          const l = scanline_width //scanline_buffer.byteLength;\n          for (let i = 0; i < l; i++) {\n            let off = 0\n            data_rgba[offset] = scanline_buffer[i + off]\n            off += scanline_width //1;\n            data_rgba[offset + 1] = scanline_buffer[i + off]\n            off += scanline_width //1;\n            data_rgba[offset + 2] = scanline_buffer[i + off]\n            off += scanline_width //1;\n            data_rgba[offset + 3] = scanline_buffer[i + off]\n            offset += 4\n          }\n\n          num_scanlines--\n        }\n\n        return data_rgba\n      }\n\n    const RGBEByteToRGBFloat = function (sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3]\n      const scale = Math.pow(2.0, e - 128.0) / 255.0\n\n      destArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale\n      destArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale\n      destArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale\n      destArray[destOffset + 3] = 1\n    }\n\n    const RGBEByteToRGBHalf = function (sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3]\n      const scale = Math.pow(2.0, e - 128.0) / 255.0\n\n      // clamping to 65504, the maximum representable value in float16\n      destArray[destOffset + 0] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 0] * scale, 65504))\n      destArray[destOffset + 1] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 1] * scale, 65504))\n      destArray[destOffset + 2] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 2] * scale, 65504))\n      destArray[destOffset + 3] = DataUtils.toHalfFloat(1)\n    }\n\n    const byteArray = new Uint8Array(buffer)\n    byteArray.pos = 0\n    const rgbe_header_info = RGBE_ReadHeader(byteArray)\n\n    if (RGBE_RETURN_FAILURE !== rgbe_header_info) {\n      const w = rgbe_header_info.width,\n        h = rgbe_header_info.height,\n        image_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h)\n\n      if (RGBE_RETURN_FAILURE !== image_rgba_data) {\n        let data, type\n        let numElements\n\n        switch (this.type) {\n          case FloatType:\n            numElements = image_rgba_data.length / 4\n            const floatArray = new Float32Array(numElements * 4)\n\n            for (let j = 0; j < numElements; j++) {\n              RGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 4)\n            }\n\n            data = floatArray\n            type = FloatType\n            break\n\n          case HalfFloatType:\n            numElements = image_rgba_data.length / 4\n            const halfArray = new Uint16Array(numElements * 4)\n\n            for (let j = 0; j < numElements; j++) {\n              RGBEByteToRGBHalf(image_rgba_data, j * 4, halfArray, j * 4)\n            }\n\n            data = halfArray\n            type = HalfFloatType\n            break\n\n          default:\n            console.error('THREE.RGBELoader: unsupported type: ', this.type)\n            break\n        }\n\n        return {\n          width: w,\n          height: h,\n          data: data,\n          header: rgbe_header_info.string,\n          gamma: rgbe_header_info.gamma,\n          exposure: rgbe_header_info.exposure,\n          type: type,\n        }\n      }\n    }\n\n    return null\n  }\n\n  setDataType(value) {\n    this.type = value\n    return this\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    function onLoadCallback(texture, texData) {\n      switch (texture.type) {\n        case FloatType:\n        case HalfFloatType:\n          if ('colorSpace' in texture) texture.colorSpace = 'srgb-linear'\n          else texture.encoding = 3000 // LinearEncoding\n          texture.minFilter = LinearFilter\n          texture.magFilter = LinearFilter\n          texture.generateMipmaps = false\n          texture.flipY = true\n\n          break\n      }\n\n      if (onLoad) onLoad(texture, texData)\n    }\n\n    return super.load(url, onLoadCallback, onProgress, onError)\n  }\n}\n\nexport { RGBELoader }\n","const presetsObj = {\n  apartment: 'lebombo_1k.hdr',\n  city: 'potsdamer_platz_1k.hdr',\n  dawn: 'kiara_1_dawn_1k.hdr',\n  forest: 'forest_slope_1k.hdr',\n  lobby: 'st_fagans_interior_1k.hdr',\n  night: 'dikhololo_night_1k.hdr',\n  park: 'rooitou_park_1k.hdr',\n  studio: 'studio_small_03_1k.hdr',\n  sunset: 'venice_sunset_1k.hdr',\n  warehouse: 'empty_warehouse_01_1k.hdr'\n};\n\nexport { presetsObj };\n","import { useLoader } from '@react-three/fiber';\nimport { CubeReflectionMapping, EquirectangularReflectionMapping, sRGBEncoding, LinearEncoding, CubeTextureLoader } from 'three';\nimport { RGBELoader } from 'three-stdlib';\nimport { presetsObj } from '../helpers/environment-assets.js';\n\nconst CUBEMAP_ROOT = 'https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/';\nfunction useEnvironment({\n  files = ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'],\n  path = '',\n  preset = undefined,\n  encoding = undefined,\n  extensions\n} = {}) {\n  if (preset) {\n    if (!(preset in presetsObj)) throw new Error('Preset must be one of: ' + Object.keys(presetsObj).join(', '));\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n\n  const isCubeMap = Array.isArray(files);\n  const loader = isCubeMap ? CubeTextureLoader : RGBELoader;\n  const loaderResult = useLoader( // @ts-expect-error\n  loader, isCubeMap ? [files] : files, loader => {\n    loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n  const texture = isCubeMap ? // @ts-ignore\n  loaderResult[0] : loaderResult;\n  texture.mapping = isCubeMap ? CubeReflectionMapping : EquirectangularReflectionMapping;\n  texture.encoding = (encoding !== null && encoding !== void 0 ? encoding : isCubeMap) ? sRGBEncoding : LinearEncoding;\n  return texture;\n}\n\nexport { useEnvironment };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useFrame, createPortal, extend } from '@react-three/fiber';\nimport { Scene, WebGLCubeRenderTarget, HalfFloatType } from 'three';\nimport { GroundProjectedEnv } from 'three-stdlib';\nimport { useEnvironment } from './useEnvironment.js';\n\nconst isRef = obj => obj.current && obj.current.isScene;\n\nconst resolveScene = scene => isRef(scene) ? scene.current : scene;\n\nfunction setEnvProps(background, scene, defaultScene, texture, blur = 0) {\n  const target = resolveScene(scene || defaultScene);\n  const oldbg = target.background;\n  const oldenv = target.environment; // @ts-ignore\n\n  const oldBlur = target.backgroundBlurriness || 0;\n  if (background !== 'only') target.environment = texture;\n  if (background) target.background = texture; // @ts-ignore\n\n  if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = blur;\n  return () => {\n    if (background !== 'only') target.environment = oldenv;\n    if (background) target.background = oldbg; // @ts-ignore\n\n    if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = oldBlur;\n  };\n}\n\nfunction EnvironmentMap({\n  scene,\n  background = false,\n  blur,\n  map\n}) {\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    if (map) return setEnvProps(background, scene, defaultScene, map, blur);\n  }, [defaultScene, scene, map, background, blur]);\n  return null;\n}\nfunction EnvironmentCube({\n  background = false,\n  scene,\n  blur,\n  ...rest\n}) {\n  const texture = useEnvironment(rest);\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    return setEnvProps(background, scene, defaultScene, texture, blur);\n  }, [texture, background, scene, defaultScene, blur]);\n  return null;\n}\nfunction EnvironmentPortal({\n  children,\n  near = 1,\n  far = 1000,\n  resolution = 256,\n  frames = 1,\n  map,\n  background = false,\n  blur,\n  scene,\n  files,\n  path,\n  preset = undefined,\n  extensions\n}) {\n  const gl = useThree(state => state.gl);\n  const defaultScene = useThree(state => state.scene);\n  const camera = React.useRef(null);\n  const [virtualScene] = React.useState(() => new Scene());\n  const fbo = React.useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  React.useLayoutEffect(() => {\n    if (frames === 1) camera.current.update(gl, virtualScene);\n    return setEnvProps(background, scene, defaultScene, fbo.texture, blur);\n  }, [children, virtualScene, fbo.texture, scene, defaultScene, background, frames, gl]);\n  let count = 1;\n  useFrame(() => {\n    if (frames === Infinity || count < frames) {\n      camera.current.update(gl, virtualScene);\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: camera,\n    args: [near, far, fbo]\n  }), files || preset ? /*#__PURE__*/React.createElement(EnvironmentCube, {\n    background: true,\n    files: files,\n    preset: preset,\n    path: path,\n    extensions: extensions\n  }) : map ? /*#__PURE__*/React.createElement(EnvironmentMap, {\n    background: true,\n    map: map,\n    extensions: extensions\n  }) : null), virtualScene));\n}\n\nfunction EnvironmentGround(props) {\n  var _props$ground, _props$ground2, _scale, _props$ground3;\n\n  const textureDefault = useEnvironment(props);\n  const texture = props.map || textureDefault;\n  React.useMemo(() => extend({\n    GroundProjectedEnvImpl: GroundProjectedEnv\n  }), []);\n  const args = React.useMemo(() => [texture], [texture]);\n  const height = (_props$ground = props.ground) == null ? void 0 : _props$ground.height;\n  const radius = (_props$ground2 = props.ground) == null ? void 0 : _props$ground2.radius;\n  const scale = (_scale = (_props$ground3 = props.ground) == null ? void 0 : _props$ground3.scale) !== null && _scale !== void 0 ? _scale : 1000;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EnvironmentMap, _extends({}, props, {\n    map: texture\n  })), /*#__PURE__*/React.createElement(\"groundProjectedEnvImpl\", {\n    args: args,\n    scale: scale,\n    height: height,\n    radius: radius\n  }));\n}\n\nfunction Environment(props) {\n  return props.ground ? /*#__PURE__*/React.createElement(EnvironmentGround, props) : props.map ? /*#__PURE__*/React.createElement(EnvironmentMap, props) : props.children ? /*#__PURE__*/React.createElement(EnvironmentPortal, props) : /*#__PURE__*/React.createElement(EnvironmentCube, props);\n}\n\nexport { Environment, EnvironmentCube, EnvironmentMap, EnvironmentPortal };\n","/**\n * Two pass Gaussian blur filter (horizontal and vertical blur shaders)\n * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/\n *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html\n *\n * - 9 samples per pass\n * - standard deviation 2.7\n * - \"h\" and \"v\" parameters should be set to \"1 / width\" and \"1 / height\"\n */\n\nimport type { IUniform, Texture } from 'three'\nimport type { IShader } from './types'\n\nexport type HorizontalBlurShaderUniforms = {\n  tDiffuse: IUniform<Texture | null>\n  h: IUniform<number>\n}\n\nexport interface IHorizontalBlurShader extends IShader<HorizontalBlurShaderUniforms> {}\n\nexport const HorizontalBlurShader: IHorizontalBlurShader = {\n  uniforms: {\n    tDiffuse: { value: null },\n    h: { value: 1.0 / 512.0 },\n  },\n  vertexShader: /* glsl */ `\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  `,\n  fragmentShader: /* glsl */ `\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  `,\n}\n","/**\n * Two pass Gaussian blur filter (horizontal and vertical blur shaders)\n * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/\n *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html\n *\n * - 9 samples per pass\n * - standard deviation 2.7\n * - \"h\" and \"v\" parameters should be set to \"1 / width\" and \"1 / height\"\n */\n\nimport type { IUniform, Texture } from 'three'\nimport type { IShader } from './types'\n\nexport type VerticalBlurShaderUniforms = {\n  tDiffuse: IUniform<Texture | null>\n  v: IUniform<number>\n}\n\nexport interface IVerticalBlurShader extends IShader<VerticalBlurShaderUniforms> {}\n\nexport const VerticalBlurShader: IVerticalBlurShader = {\n  uniforms: {\n    tDiffuse: { value: null },\n    v: { value: 1.0 / 512.0 },\n  },\n  vertexShader: /* glsl */ `\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  `,\n  fragmentShader: /* glsl */ `\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  `,\n}\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { HorizontalBlurShader, VerticalBlurShader } from 'three-stdlib';\n\nconst ContactShadows = /*#__PURE__*/React.forwardRef(({\n  scale = 10,\n  frames = Infinity,\n  opacity = 1,\n  width = 1,\n  height = 1,\n  blur = 1,\n  far = 10,\n  resolution = 512,\n  smooth = true,\n  color = '#000000',\n  depthWrite = false,\n  renderOrder,\n  ...props\n}, fref) => {\n  const ref = React.useRef(null);\n  const scene = useThree(state => state.scene);\n  const gl = useThree(state => state.gl);\n  const shadowCamera = React.useRef(null);\n  width = width * (Array.isArray(scale) ? scale[0] : scale || 1);\n  height = height * (Array.isArray(scale) ? scale[1] : scale || 1);\n  const [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur] = React.useMemo(() => {\n    const renderTarget = new THREE.WebGLRenderTarget(resolution, resolution);\n    const renderTargetBlur = new THREE.WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    const planeGeometry = new THREE.PlaneGeometry(width, height).rotateX(Math.PI / 2);\n    const blurPlane = new THREE.Mesh(planeGeometry);\n    const depthMaterial = new THREE.MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n\n    depthMaterial.onBeforeCompile = shader => {\n      shader.uniforms = { ...shader.uniforms,\n        ucolor: {\n          value: new THREE.Color(color)\n        }\n      };\n      shader.fragmentShader = shader.fragmentShader.replace(`void main() {`, //\n      `uniform vec3 ucolor;\n           void main() {\n          `);\n      shader.fragmentShader = shader.fragmentShader.replace('vec4( vec3( 1.0 - fragCoordZ ), opacity );', // Colorize the shadow, multiply by the falloff so that the center can remain darker\n      'vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );');\n    };\n\n    const horizontalBlurMaterial = new THREE.ShaderMaterial(HorizontalBlurShader);\n    const verticalBlurMaterial = new THREE.ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height, scale, color]);\n\n  const blurShadows = blur => {\n    blurPlane.visible = true;\n    blurPlane.material = horizontalBlurMaterial;\n    horizontalBlurMaterial.uniforms.tDiffuse.value = renderTarget.texture;\n    horizontalBlurMaterial.uniforms.h.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTargetBlur);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.material = verticalBlurMaterial;\n    verticalBlurMaterial.uniforms.tDiffuse.value = renderTargetBlur.texture;\n    verticalBlurMaterial.uniforms.v.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTarget);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.visible = false;\n  };\n\n  let count = 0;\n  let initialBackground;\n  let initialOverrideMaterial;\n  useFrame(() => {\n    if (shadowCamera.current && (frames === Infinity || count < frames)) {\n      count++;\n      initialBackground = scene.background;\n      initialOverrideMaterial = scene.overrideMaterial;\n      ref.current.visible = false;\n      scene.background = null;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      blurShadows(blur);\n      if (smooth) blurShadows(blur * 0.4);\n      gl.setRenderTarget(null);\n      ref.current.visible = true;\n      scene.overrideMaterial = initialOverrideMaterial;\n      scene.background = initialBackground;\n    }\n  });\n  React.useImperativeHandle(fref, () => ref.current, []);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    \"rotation-x\": Math.PI / 2\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    renderOrder: renderOrder,\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    transparent: true,\n    map: renderTarget.texture,\n    opacity: opacity,\n    depthWrite: depthWrite\n  })), /*#__PURE__*/React.createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\n\nexport { ContactShadows };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { Box3, Vector3, Sphere } from 'three';\nimport * as React from 'react';\n\nconst Center = /*#__PURE__*/React.forwardRef(function Center({\n  children,\n  disable,\n  disableX,\n  disableY,\n  disableZ,\n  left,\n  right,\n  top,\n  bottom,\n  front,\n  back,\n  onCentered,\n  precise = true,\n  cacheKey = 0,\n  ...props\n}, fRef) {\n  const ref = React.useRef(null);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  React.useLayoutEffect(() => {\n    outer.current.matrixWorld.identity();\n    const box3 = new Box3().setFromObject(inner.current, precise);\n    const center = new Vector3();\n    const sphere = new Sphere();\n    const width = box3.max.x - box3.min.x;\n    const height = box3.max.y - box3.min.y;\n    const depth = box3.max.z - box3.min.z;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    const vAlign = top ? height / 2 : bottom ? -height / 2 : 0;\n    const hAlign = left ? -width / 2 : right ? width / 2 : 0;\n    const dAlign = front ? depth / 2 : back ? -depth / 2 : 0;\n    outer.current.position.set(disable || disableX ? 0 : -center.x + hAlign, disable || disableY ? 0 : -center.y + vAlign, disable || disableZ ? 0 : -center.z + dAlign); // Only fire onCentered if the bounding box has changed\n\n    if (typeof onCentered !== 'undefined') {\n      onCentered({\n        parent: ref.current.parent,\n        container: ref.current,\n        width,\n        height,\n        depth,\n        boundingBox: box3,\n        boundingSphere: sphere,\n        center: center,\n        verticalAlignment: vAlign,\n        horizontalAlignment: hAlign,\n        depthAlignment: dAlign\n      });\n    }\n  }, [cacheKey, onCentered, top, left, front, disable, disableX, disableY, disableZ, precise, right, bottom, back]);\n  React.useImperativeHandle(fRef, () => ref.current, []);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)));\n});\n\nexport { Center };\n","import * as THREE from 'three';\n\nfunction shaderMaterial(uniforms, vertexShader, fragmentShader, onInit) {\n  const material = class material extends THREE.ShaderMaterial {\n    constructor(parameters = {}) {\n      const entries = Object.entries(uniforms); // Create unforms and shaders\n\n      super({\n        uniforms: entries.reduce((acc, [name, value]) => {\n          const uniform = THREE.UniformsUtils.clone({\n            [name]: {\n              value\n            }\n          });\n          return { ...acc,\n            ...uniform\n          };\n        }, {}),\n        vertexShader,\n        fragmentShader\n      }); // Create getter/setters\n\n      this.key = '';\n      entries.forEach(([name]) => Object.defineProperty(this, name, {\n        get: () => this.uniforms[name].value,\n        set: v => this.uniforms[name].value = v\n      })); // Assign parameters, this might include uniforms\n\n      Object.assign(this, parameters); // Call onInit\n\n      if (onInit) onInit(this);\n    }\n\n  };\n  material.key = THREE.MathUtils.generateUUID();\n  return material;\n}\n\nexport { shaderMaterial };\n","import { shaderMaterial } from '../core/shaderMaterial.js';\n\nconst DiscardMaterial = shaderMaterial({}, 'void main() { }', 'void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }');\n\nexport { DiscardMaterial };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport { shaderMaterial } from './shaderMaterial.js';\nimport { DiscardMaterial } from '../materials/DiscardMaterial.js';\n\nfunction isLight(object) {\n  return object.isLight;\n}\n\nfunction isGeometry(object) {\n  return !!object.geometry;\n}\n\nconst accumulativeContext = /*#__PURE__*/React.createContext(null);\nconst SoftShadowMaterial = shaderMaterial({\n  color: new THREE.Color(),\n  blend: 2.0,\n  alphaTest: 0.75,\n  opacity: 0,\n  map: null\n}, `varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }`, `varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <encodings_fragment>\n   }`);\nconst AccumulativeShadows = /*#__PURE__*/React.forwardRef(({\n  children,\n  temporal,\n  frames = 40,\n  limit = Infinity,\n  blend = 20,\n  scale = 10,\n  opacity = 1,\n  alphaTest = 0.75,\n  color = 'black',\n  colorBlend = 2,\n  resolution = 1024,\n  toneMapped = true,\n  ...props\n}, forwardRef) => {\n  extend({\n    SoftShadowMaterial\n  });\n  const gl = useThree(state => state.gl);\n  const scene = useThree(state => state.scene);\n  const camera = useThree(state => state.camera);\n  const invalidate = useThree(state => state.invalidate);\n  const gPlane = React.useRef(null);\n  const gLights = React.useRef(null);\n  const [plm] = React.useState(() => new ProgressiveLightMap(gl, scene, resolution));\n  React.useLayoutEffect(() => {\n    plm.configure(gPlane.current);\n  }, []);\n  const api = React.useMemo(() => ({\n    lights: new Map(),\n    temporal: !!temporal,\n    frames: Math.max(2, frames),\n    blend: Math.max(2, frames === Infinity ? blend : frames),\n    count: 0,\n    getMesh: () => gPlane.current,\n    reset: () => {\n      // Clear buffers, reset opacities, set frame count to 0\n      plm.clear();\n      const material = gPlane.current.material;\n      material.opacity = 0;\n      material.alphaTest = 0;\n      api.count = 0;\n    },\n    update: (frames = 1) => {\n      // Adapt the opacity-blend ratio to the number of frames\n      const material = gPlane.current.material;\n\n      if (!api.temporal) {\n        material.opacity = opacity;\n        material.alphaTest = alphaTest;\n      } else {\n        material.opacity = Math.min(opacity, material.opacity + opacity / api.blend);\n        material.alphaTest = Math.min(alphaTest, material.alphaTest + alphaTest / api.blend);\n      } // Switch accumulative lights on\n\n\n      gLights.current.visible = true; // Collect scene lights and meshes\n\n      plm.prepare(); // Update the lightmap and the accumulative lights\n\n      for (let i = 0; i < frames; i++) {\n        api.lights.forEach(light => light.update());\n        plm.update(camera, api.blend);\n      } // Switch lights off\n\n\n      gLights.current.visible = false; // Restore lights and meshes\n\n      plm.finish();\n    }\n  }), [plm, camera, scene, temporal, frames, blend, opacity, alphaTest]);\n  React.useLayoutEffect(() => {\n    // Reset internals, buffers, ...\n    api.reset(); // Update lightmap\n\n    if (!api.temporal && api.frames !== Infinity) api.update(api.blend);\n  }); // Expose api, allow children to set itself as the main light source\n\n  React.useImperativeHandle(forwardRef, () => api, [api]);\n  useFrame(() => {\n    if ((api.temporal || api.frames === Infinity) && api.count < api.frames && api.count < limit) {\n      invalidate();\n      api.update();\n      api.count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    traverse: () => null,\n    ref: gLights\n  }, /*#__PURE__*/React.createElement(accumulativeContext.Provider, {\n    value: api\n  }, children)), /*#__PURE__*/React.createElement(\"mesh\", {\n    receiveShadow: true,\n    ref: gPlane,\n    scale: scale,\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"planeGeometry\", null), /*#__PURE__*/React.createElement(\"softShadowMaterial\", {\n    transparent: true,\n    depthWrite: false,\n    toneMapped: toneMapped,\n    color: color,\n    blend: colorBlend,\n    map: plm.progressiveLightMap2.texture\n  })));\n});\nconst RandomizedLight = /*#__PURE__*/React.forwardRef(({\n  castShadow = true,\n  bias = 0.001,\n  mapSize = 512,\n  size = 5,\n  near = 0.5,\n  far = 500,\n  frames = 1,\n  position = [0, 0, 0],\n  radius = 1,\n  amount = 8,\n  intensity = 1,\n  ambient = 0.5,\n  ...props\n}, forwardRef) => {\n  const gLights = React.useRef(null);\n  const length = new THREE.Vector3(...position).length();\n  const parent = React.useContext(accumulativeContext);\n  const update = React.useCallback(() => {\n    let light;\n\n    if (gLights.current) {\n      for (let l = 0; l < gLights.current.children.length; l++) {\n        light = gLights.current.children[l];\n\n        if (Math.random() > ambient) {\n          light.position.set(position[0] + THREE.MathUtils.randFloatSpread(radius), position[1] + THREE.MathUtils.randFloatSpread(radius), position[2] + THREE.MathUtils.randFloatSpread(radius));\n        } else {\n          let lambda = Math.acos(2 * Math.random() - 1) - Math.PI / 2.0;\n          let phi = 2 * Math.PI * Math.random();\n          light.position.set(Math.cos(lambda) * Math.cos(phi) * length, Math.abs(Math.cos(lambda) * Math.sin(phi) * length), Math.sin(lambda) * length);\n        }\n      }\n    }\n  }, [radius, ambient, length, ...position]);\n  const api = React.useMemo(() => ({\n    update\n  }), [update]);\n  React.useImperativeHandle(forwardRef, () => api, [api]);\n  React.useLayoutEffect(() => {\n    const group = gLights.current;\n    if (parent) parent.lights.set(group.uuid, api);\n    return () => void parent.lights.delete(group.uuid);\n  }, [parent, api]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: gLights\n  }, props), Array.from({\n    length: amount\n  }, (_, index) => /*#__PURE__*/React.createElement(\"directionalLight\", {\n    key: index,\n    castShadow: castShadow,\n    \"shadow-bias\": bias,\n    \"shadow-mapSize\": [mapSize, mapSize],\n    intensity: intensity / amount\n  }, /*#__PURE__*/React.createElement(\"orthographicCamera\", {\n    attach: \"shadow-camera\",\n    args: [-size, size, size, -size, near, far]\n  }))));\n}); // Based on \"Progressive Light Map Accumulator\", by [zalo](https://github.com/zalo/)\n\nclass ProgressiveLightMap {\n  constructor(renderer, scene, res = 1024) {\n    this.renderer = renderer;\n    this.res = res;\n    this.scene = scene;\n    this.buffer1Active = false;\n    this.lights = [];\n    this.meshes = [];\n    this.object = null;\n    this.clearColor = new THREE.Color();\n    this.clearAlpha = 0; // Create the Progressive LightMap Texture\n\n    const format = /(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent) ? THREE.HalfFloatType : THREE.FloatType;\n    this.progressiveLightMap1 = new THREE.WebGLRenderTarget(this.res, this.res, {\n      type: format\n    });\n    this.progressiveLightMap2 = new THREE.WebGLRenderTarget(this.res, this.res, {\n      type: format\n    }); // Inject some spicy new logic into a standard phong material\n\n    this.discardMat = new DiscardMaterial();\n    this.targetMat = new THREE.MeshLambertMaterial({\n      fog: false\n    });\n    this.previousShadowMap = {\n      value: this.progressiveLightMap1.texture\n    };\n    this.averagingWindow = {\n      value: 100\n    };\n\n    this.targetMat.onBeforeCompile = shader => {\n      // Vertex Shader: Set Vertex Positions to the Unwrapped UV Positions\n      shader.vertexShader = 'varying vec2 vUv;\\n' + shader.vertexShader.slice(0, -1) + 'vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }'; // Fragment Shader: Set Pixels to average in the Previous frame's Shadows\n\n      const bodyStart = shader.fragmentShader.indexOf('void main() {');\n      shader.fragmentShader = 'varying vec2 vUv;\\n' + shader.fragmentShader.slice(0, bodyStart) + 'uniform sampler2D previousShadowMap;\\n\tuniform float averagingWindow;\\n' + shader.fragmentShader.slice(bodyStart - 1, -1) + `\\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }`; // Set the Previous Frame's Texture Buffer and Averaging Window\n\n      shader.uniforms.previousShadowMap = this.previousShadowMap;\n      shader.uniforms.averagingWindow = this.averagingWindow;\n    };\n  }\n\n  clear() {\n    this.renderer.getClearColor(this.clearColor);\n    this.clearAlpha = this.renderer.getClearAlpha();\n    this.renderer.setClearColor('black', 1);\n    this.renderer.setRenderTarget(this.progressiveLightMap1);\n    this.renderer.clear();\n    this.renderer.setRenderTarget(this.progressiveLightMap2);\n    this.renderer.clear();\n    this.renderer.setRenderTarget(null);\n    this.renderer.setClearColor(this.clearColor, this.clearAlpha);\n    this.lights = [];\n    this.meshes = [];\n    this.scene.traverse(object => {\n      if (isGeometry(object)) {\n        this.meshes.push({\n          object,\n          material: object.material\n        });\n      } else if (isLight(object)) {\n        this.lights.push({\n          object,\n          intensity: object.intensity\n        });\n      }\n    });\n  }\n\n  prepare() {\n    this.lights.forEach(light => light.object.intensity = 0);\n    this.meshes.forEach(mesh => mesh.object.material = this.discardMat);\n  }\n\n  finish() {\n    this.lights.forEach(light => light.object.intensity = light.intensity);\n    this.meshes.forEach(mesh => mesh.object.material = mesh.material);\n  }\n\n  configure(object) {\n    this.object = object;\n  }\n\n  update(camera, blendWindow = 100) {\n    if (!this.object) return; // Set each object's material to the UV Unwrapped Surface Mapping Version\n\n    this.averagingWindow.value = blendWindow;\n    this.object.material = this.targetMat; // Ping-pong two surface buffers for reading/writing\n\n    const activeMap = this.buffer1Active ? this.progressiveLightMap1 : this.progressiveLightMap2;\n    const inactiveMap = this.buffer1Active ? this.progressiveLightMap2 : this.progressiveLightMap1; // Render the object's surface maps\n\n    const oldBg = this.scene.background;\n    this.scene.background = null;\n    this.renderer.setRenderTarget(activeMap);\n    this.previousShadowMap.value = inactiveMap.texture;\n    this.buffer1Active = !this.buffer1Active;\n    this.renderer.render(this.scene, camera);\n    this.renderer.setRenderTarget(null);\n    this.scene.background = oldBg;\n  }\n\n}\n\nexport { AccumulativeShadows, RandomizedLight, accumulativeContext };\n","import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nconst isOrthographic = def => def && def.isOrthographicCamera;\n\nconst isBox3 = def => def && def.isBox3;\n\nconst context = /*#__PURE__*/React.createContext(null);\nfunction Bounds({\n  children,\n  damping = 6,\n  fit,\n  clip,\n  observe,\n  margin = 1.2,\n  eps = 0.01,\n  onFit\n}) {\n  const ref = React.useRef(null);\n  const {\n    camera,\n    invalidate,\n    size,\n    controls: controlsImpl\n  } = useThree();\n  const controls = controlsImpl;\n  const onFitRef = React.useRef(onFit);\n  onFitRef.current = onFit;\n\n  function equals(a, b) {\n    return Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps;\n  }\n\n  function damp(v, t, lambda, delta) {\n    v.x = THREE.MathUtils.damp(v.x, t.x, lambda, delta);\n    v.y = THREE.MathUtils.damp(v.y, t.y, lambda, delta);\n    v.z = THREE.MathUtils.damp(v.z, t.z, lambda, delta);\n  }\n\n  const [current] = React.useState(() => ({\n    animating: false,\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [goal] = React.useState(() => ({\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [box] = React.useState(() => new THREE.Box3());\n  const api = React.useMemo(() => {\n    function getSize() {\n      const size = box.getSize(new THREE.Vector3());\n      const center = box.getCenter(new THREE.Vector3());\n      const maxSize = Math.max(size.x, size.y, size.z);\n      const fitHeightDistance = isOrthographic(camera) ? maxSize * 4 : maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n      const fitWidthDistance = isOrthographic(camera) ? maxSize * 4 : fitHeightDistance / camera.aspect;\n      const distance = margin * Math.max(fitHeightDistance, fitWidthDistance);\n      return {\n        box,\n        size,\n        center,\n        distance\n      };\n    }\n\n    return {\n      getSize,\n\n      refresh(object) {\n        if (isBox3(object)) box.copy(object);else {\n          const target = object || ref.current;\n          target.updateWorldMatrix(true, true);\n          box.setFromObject(target);\n        }\n\n        if (box.isEmpty()) {\n          const max = camera.position.length() || 10;\n          box.setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3(max, max, max));\n        }\n\n        if ((controls == null ? void 0 : controls.constructor.name) === 'OrthographicTrackballControls') {\n          // Put camera on a sphere along which it should move\n          const {\n            distance\n          } = getSize();\n          const direction = camera.position.clone().sub(controls.target).normalize().multiplyScalar(distance);\n          const newPos = controls.target.clone().add(direction);\n          camera.position.copy(newPos);\n        }\n\n        return this;\n      },\n\n      clip() {\n        const {\n          distance\n        } = getSize();\n        if (controls) controls.maxDistance = distance * 10;\n        camera.near = distance / 100;\n        camera.far = distance * 100;\n        camera.updateProjectionMatrix();\n        if (controls) controls.update();\n        invalidate();\n        return this;\n      },\n\n      to({\n        position,\n        target\n      }) {\n        current.camera.copy(camera.position);\n        const {\n          center\n        } = getSize();\n        goal.camera.set(...position);\n\n        if (target) {\n          goal.focus.set(...target);\n        } else {\n          goal.focus.copy(center);\n        }\n\n        if (damping) {\n          current.animating = true;\n        } else {\n          camera.position.set(...position);\n        }\n\n        return this;\n      },\n\n      fit() {\n        current.camera.copy(camera.position);\n        if (controls) current.focus.copy(controls.target);\n        const {\n          center,\n          distance\n        } = getSize();\n        const direction = center.clone().sub(camera.position).normalize().multiplyScalar(distance);\n        goal.camera.copy(center).sub(direction);\n        goal.focus.copy(center);\n\n        if (isOrthographic(camera)) {\n          current.zoom = camera.zoom;\n          let maxHeight = 0,\n              maxWidth = 0;\n          const vertices = [new THREE.Vector3(box.min.x, box.min.y, box.min.z), new THREE.Vector3(box.min.x, box.max.y, box.min.z), new THREE.Vector3(box.min.x, box.min.y, box.max.z), new THREE.Vector3(box.min.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.min.z), new THREE.Vector3(box.max.x, box.min.y, box.max.z), new THREE.Vector3(box.max.x, box.min.y, box.min.z)]; // Transform the center and each corner to camera space\n\n          center.applyMatrix4(camera.matrixWorldInverse);\n\n          for (const v of vertices) {\n            v.applyMatrix4(camera.matrixWorldInverse);\n            maxHeight = Math.max(maxHeight, Math.abs(v.y - center.y));\n            maxWidth = Math.max(maxWidth, Math.abs(v.x - center.x));\n          }\n\n          maxHeight *= 2;\n          maxWidth *= 2;\n          const zoomForHeight = (camera.top - camera.bottom) / maxHeight;\n          const zoomForWidth = (camera.right - camera.left) / maxWidth;\n          goal.zoom = Math.min(zoomForHeight, zoomForWidth) / margin;\n\n          if (!damping) {\n            camera.zoom = goal.zoom;\n            camera.updateProjectionMatrix();\n          }\n        }\n\n        if (damping) {\n          current.animating = true;\n        } else {\n          camera.position.copy(goal.camera);\n          camera.lookAt(goal.focus);\n\n          if (controls) {\n            controls.target.copy(goal.focus);\n            controls.update();\n          }\n        }\n\n        if (onFitRef.current) onFitRef.current(this.getSize());\n        invalidate();\n        return this;\n      }\n\n    };\n  }, [box, camera, controls, margin, damping, invalidate]);\n  React.useLayoutEffect(() => {\n    if (controls) {\n      // Try to prevent drag hijacking\n      const callback = () => current.animating = false;\n\n      controls.addEventListener('start', callback);\n      return () => controls.removeEventListener('start', callback);\n    }\n  }, [controls]); // Scale pointer on window resize\n\n  const count = React.useRef(0);\n  React.useLayoutEffect(() => {\n    if (observe || count.current++ === 0) {\n      api.refresh();\n      if (fit) api.fit();\n      if (clip) api.clip();\n    }\n  }, [size, clip, fit, observe, camera, controls]);\n  useFrame((state, delta) => {\n    if (current.animating) {\n      damp(current.focus, goal.focus, damping, delta);\n      damp(current.camera, goal.camera, damping, delta);\n      current.zoom = THREE.MathUtils.damp(current.zoom, goal.zoom, damping, delta);\n      camera.position.copy(current.camera);\n\n      if (isOrthographic(camera)) {\n        camera.zoom = current.zoom;\n        camera.updateProjectionMatrix();\n      }\n\n      if (!controls) {\n        camera.lookAt(current.focus);\n      } else {\n        controls.target.copy(current.focus);\n        controls.update();\n      }\n\n      invalidate();\n      if (isOrthographic(camera) && !(Math.abs(current.zoom - goal.zoom) < eps)) return;\n      if (!isOrthographic(camera) && !equals(current.camera, goal.camera)) return;\n      if (controls && !equals(current.focus, goal.focus)) return;\n      current.animating = false;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children));\n}\nfunction useBounds() {\n  return React.useContext(context);\n}\n\nexport { Bounds, useBounds };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nimport { Center } from './Center.js';\nimport { AccumulativeShadows, RandomizedLight } from './AccumulativeShadows.js';\nimport { Bounds, useBounds } from './Bounds.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\n\nfunction Refit({\n  radius,\n  adjustCamera\n}) {\n  const api = useBounds();\n  React.useEffect(() => {\n    if (adjustCamera) api.refresh().clip().fit();\n  }, [radius, adjustCamera]);\n  return null;\n}\n\nfunction Stage({\n  children,\n  center,\n  adjustCamera = true,\n  intensity = 0.5,\n  shadows = 'contact',\n  environment = 'city',\n  preset = 'rembrandt',\n  ...props\n}) {\n  var _bias, _normalBias, _size, _offset, _amount, _radius, _ambient, _intensity;\n\n  const config = typeof preset === 'string' ? presets[preset] : preset;\n  const [{\n    radius,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0,\n    depth: 0\n  });\n  const shadowBias = (_bias = shadows == null ? void 0 : shadows.bias) !== null && _bias !== void 0 ? _bias : -0.0001;\n  const normalBias = (_normalBias = shadows == null ? void 0 : shadows.normalBias) !== null && _normalBias !== void 0 ? _normalBias : 0;\n  const shadowSize = (_size = shadows == null ? void 0 : shadows.size) !== null && _size !== void 0 ? _size : 1024;\n  const shadowOffset = (_offset = shadows == null ? void 0 : shadows.offset) !== null && _offset !== void 0 ? _offset : 0;\n  const contactShadow = shadows === 'contact' || (shadows == null ? void 0 : shadows.type) === 'contact';\n  const accumulativeShadow = shadows === 'accumulative' || (shadows == null ? void 0 : shadows.type) === 'accumulative';\n  const shadowSpread = { ...(typeof shadows === 'object' ? shadows : {})\n  };\n  const environmentProps = !environment ? null : typeof environment === 'string' ? {\n    preset: environment\n  } : environment;\n  const onCentered = React.useCallback(props => {\n    const {\n      width,\n      height,\n      depth,\n      boundingSphere\n    } = props;\n    set({\n      radius: boundingSphere.radius,\n      width,\n      height,\n      depth\n    });\n    if (center != null && center.onCentered) center.onCentered(props);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: !!shadows,\n    \"shadow-bias\": shadowBias,\n    \"shadow-normalBias\": normalBias,\n    \"shadow-mapSize\": shadowSize\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }), /*#__PURE__*/React.createElement(Bounds, _extends({\n    fit: !!adjustCamera,\n    clip: !!adjustCamera,\n    margin: Number(adjustCamera),\n    observe: true\n  }, props), /*#__PURE__*/React.createElement(Refit, {\n    radius: radius,\n    adjustCamera: adjustCamera\n  }), /*#__PURE__*/React.createElement(Center, _extends({}, center, {\n    position: [0, shadowOffset / 2, 0],\n    onCentered: onCentered\n  }), children)), /*#__PURE__*/React.createElement(\"group\", {\n    position: [0, -height / 2 - shadowOffset / 2, 0]\n  }, contactShadow && /*#__PURE__*/React.createElement(ContactShadows, _extends({\n    scale: radius * 4,\n    far: radius,\n    blur: 2\n  }, shadowSpread)), accumulativeShadow && /*#__PURE__*/React.createElement(AccumulativeShadows, _extends({\n    temporal: true,\n    frames: 100,\n    alphaTest: 0.9,\n    toneMapped: true,\n    scale: radius * 4\n  }, shadowSpread), /*#__PURE__*/React.createElement(RandomizedLight, {\n    amount: (_amount = shadowSpread.amount) !== null && _amount !== void 0 ? _amount : 8,\n    radius: (_radius = shadowSpread.radius) !== null && _radius !== void 0 ? _radius : radius,\n    ambient: (_ambient = shadowSpread.ambient) !== null && _ambient !== void 0 ? _ambient : 0.5,\n    intensity: (_intensity = shadowSpread.intensity) !== null && _intensity !== void 0 ? _intensity : 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    size: radius * 4,\n    bias: -shadowBias,\n    mapSize: shadowSize\n  }))), environment && /*#__PURE__*/React.createElement(Environment, environmentProps));\n}\n\nexport { Stage };\n","import { useState, useRef, useEffect, useMemo } from 'react';\nimport createDebounce from 'debounce';\n\nfunction useMeasure(_temp) {\n  let {\n    debounce,\n    scroll,\n    polyfill,\n    offsetSize\n  } = _temp === void 0 ? {\n    debounce: 0,\n    scroll: false,\n    offsetSize: false\n  } : _temp;\n  const ResizeObserver = polyfill || (typeof window === 'undefined' ? class ResizeObserver {} : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  const [bounds, set] = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }); // keep all state in a ref\n\n  const state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  const scrollDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.scroll : null;\n  const resizeDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.resize : null; // make sure to update state only as long as the component is truly mounted\n\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => void (mounted.current = false);\n  }); // memoize handlers, so event-listeners know when they should update\n\n  const [forceRefresh, resizeChange, scrollChange] = useMemo(() => {\n    const callback = () => {\n      if (!state.current.element) return;\n      const {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      } = state.current.element.getBoundingClientRect();\n      const size = {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      };\n\n      if (state.current.element instanceof HTMLElement && offsetSize) {\n        size.height = state.current.element.offsetHeight;\n        size.width = state.current.element.offsetWidth;\n      }\n\n      Object.freeze(size);\n      if (mounted.current && !areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? createDebounce(callback, resizeDebounce) : callback, scrollDebounce ? createDebounce(callback, scrollDebounce) : callback];\n  }, [set, offsetSize, scrollDebounce, resizeDebounce]); // cleanup current scroll-listeners / observers\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(element => element.removeEventListener('scroll', scrollChange, true));\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(scrollContainer => scrollContainer.addEventListener('scroll', scrollChange, {\n        capture: true,\n        passive: true\n      }));\n    }\n  } // the ref we expose to the user\n\n\n  const ref = node => {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(() => {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(() => removeListeners, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(() => {\n    const cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return () => void window.removeEventListener('resize', cb);\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(() => {\n    if (enabled) {\n      const cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return () => void window.removeEventListener('scroll', cb, true);\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  const result = [];\n  if (!element || element === document.body) return result;\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = window.getComputedStyle(element);\n  if ([overflow, overflowX, overflowY].some(prop => prop === 'auto' || prop === 'scroll')) result.push(element);\n  return [...result, ...findScrollContainers(element.parentElement)];\n} // Checks if element boundaries are equal\n\n\nconst keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nconst areBoundsEqual = (a, b) => keys.every(key => a[key] === b[key]);\n\nexport { useMeasure as default };\n","import * as React from 'react'\nimport type ReactReconciler from 'react-reconciler'\n\n/**\n * Represents a react-internal Fiber node.\n */\nexport type Fiber<T = any> = Omit<ReactReconciler.Fiber, 'stateNode'> & { stateNode: T }\n\n/**\n * Represents a {@link Fiber} node selector for traversal.\n */\nexport type FiberSelector<T = any> = (\n  /** The current {@link Fiber} node. */\n  node: Fiber<T | null>,\n) => boolean | void\n\n/**\n * Traverses up or down a {@link Fiber}, return `true` to stop and select a node.\n */\nexport function traverseFiber<T = any>(\n  /** Input {@link Fiber} to traverse. */\n  fiber: Fiber | undefined,\n  /** Whether to ascend and walk up the tree. Will walk down if `false`. */\n  ascending: boolean,\n  /** A {@link Fiber} node selector, returns the first match when `true` is passed. */\n  selector: FiberSelector<T>,\n): Fiber<T> | undefined {\n  if (!fiber) return\n  if (selector(fiber) === true) return fiber\n\n  let child = ascending ? fiber.return : fiber.child\n  while (child) {\n    const match = traverseFiber(child, ascending, selector)\n    if (match) return match\n\n    child = ascending ? null : child.sibling\n  }\n}\n\n// In development, React will warn about using contexts between renderers.\n// Hide the warning because its-fine fixes this issue\n// https://github.com/facebook/react/pull/12779\nfunction wrapContext<T>(context: React.Context<T>): React.Context<T> {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get() {\n          return null\n        },\n        set() {},\n      },\n      _currentRenderer2: {\n        get() {\n          return null\n        },\n        set() {},\n      },\n    })\n  } catch (_) {\n    return context\n  }\n}\n\nconst FiberContext = wrapContext(React.createContext<Fiber>(null!))\n\n/**\n * A react-internal {@link Fiber} provider. This component binds React children to the React Fiber tree. Call its-fine hooks within this.\n */\nexport class FiberProvider extends React.Component<{ children?: React.ReactNode }> {\n  private _reactInternals!: Fiber\n\n  render() {\n    return <FiberContext.Provider value={this._reactInternals}>{this.props.children}</FiberContext.Provider>\n  }\n}\n\ninterface ReactInternal {\n  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {\n    ReactCurrentOwner: React.RefObject<Fiber>\n    ReactCurrentDispatcher: React.RefObject<{ readContext<T>(context: React.Context<T>): T }>\n  }\n}\n\nconst { ReactCurrentOwner, ReactCurrentDispatcher } = (React as unknown as ReactInternal)\n  .__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n\n/**\n * Returns the current react-internal {@link Fiber}. This is an implementation detail of [react-reconciler](https://github.com/facebook/react/tree/main/packages/react-reconciler).\n */\nexport function useFiber(): Fiber<null> | undefined {\n  const root = React.useContext(FiberContext)\n  if (!root) throw new Error('its-fine: useFiber must be called within a <FiberProvider />!')\n\n  // In development mode, React will expose the current component's Fiber as ReactCurrentOwner.\n  // In production, we don't have this luxury and must traverse from FiberProvider via useId\n  const id = React.useId()\n  const fiber = React.useMemo(\n    () =>\n      ReactCurrentOwner.current ??\n      traverseFiber<null>(root, false, (node) => {\n        let state = node.memoizedState\n        while (state) {\n          if (state.memoizedState === id) return true\n          state = state.next\n        }\n      }),\n    [root, id],\n  )\n\n  return fiber\n}\n\n/**\n * Represents a react-reconciler container instance.\n */\nexport interface ContainerInstance<T = any> {\n  containerInfo: T\n}\n\n/**\n * Returns the current react-reconciler container info passed to {@link ReactReconciler.Reconciler.createContainer}.\n *\n * In react-dom, a container will point to the root DOM element; in react-three-fiber, it will point to the root Zustand store.\n */\nexport function useContainer<T = any>(): T | undefined {\n  const fiber = useFiber()\n  const root = React.useMemo(\n    () => traverseFiber<ContainerInstance<T>>(fiber, true, (node) => node.stateNode?.containerInfo != null),\n    [fiber],\n  )\n\n  return root?.stateNode.containerInfo\n}\n\n/**\n * Returns the nearest react-reconciler child instance or the node created from {@link ReactReconciler.HostConfig.createInstance}.\n *\n * In react-dom, this would be a DOM element; in react-three-fiber this would be an instance descriptor.\n */\nexport function useNearestChild<T = any>(\n  /** An optional element type to filter to. */\n  type?: keyof JSX.IntrinsicElements,\n): React.MutableRefObject<T | undefined> {\n  const fiber = useFiber()\n  const childRef = React.useRef<T>()\n\n  React.useLayoutEffect(() => {\n    childRef.current = traverseFiber<T>(\n      fiber,\n      false,\n      (node) => typeof node.type === 'string' && (type === undefined || node.type === type),\n    )?.stateNode\n  }, [fiber])\n\n  return childRef\n}\n\n/**\n * Returns the nearest react-reconciler parent instance or the node created from {@link ReactReconciler.HostConfig.createInstance}.\n *\n * In react-dom, this would be a DOM element; in react-three-fiber this would be an instance descriptor.\n */\nexport function useNearestParent<T = any>(\n  /** An optional element type to filter to. */\n  type?: keyof JSX.IntrinsicElements,\n): React.MutableRefObject<T | undefined> {\n  const fiber = useFiber()\n  const parentRef = React.useRef<T>()\n\n  React.useLayoutEffect(() => {\n    parentRef.current = traverseFiber<T>(\n      fiber,\n      true,\n      (node) => typeof node.type === 'string' && (type === undefined || node.type === type),\n    )?.stateNode\n  }, [fiber])\n\n  return parentRef\n}\n\n/**\n * Represents a react-context bridge provider component.\n */\nexport type ContextBridge = React.FC<React.PropsWithChildren<{}>>\n\n/**\n * React Context currently cannot be shared across [React renderers](https://reactjs.org/docs/codebase-overview.html#renderers) but explicitly forwarded between providers (see [react#17275](https://github.com/facebook/react/issues/17275)). This hook returns a {@link ContextBridge} of live context providers to pierce Context across renderers.\n *\n * Pass {@link ContextBridge} as a component to a secondary renderer to enable context-sharing within its children.\n */\nexport function useContextBridge(): ContextBridge {\n  const fiber = useFiber()\n  const [contexts] = React.useState(() => new Map<React.Context<any>, any>())\n\n  // Collect live context\n  contexts.clear()\n  let node = fiber\n  while (node) {\n    const context = node.type?._context\n    if (context && context !== FiberContext && !contexts.has(context)) {\n      contexts.set(context, ReactCurrentDispatcher.current?.readContext(wrapContext(context)))\n    }\n    node = node.return!\n  }\n\n  // Flatten context and their memoized values into a `ContextBridge` provider\n  return React.useMemo(\n    () =>\n      Array.from(contexts.keys()).reduce(\n        (Prev, context) => (props) =>\n          (\n            <Prev>\n              <context.Provider {...props} value={contexts.get(context)} />\n            </Prev>\n          ),\n        (props) => <FiberProvider {...props} />,\n      ),\n    [contexts],\n  )\n}\n","import { c as createEvents, e as extend, u as useMutableCallback, a as createRoot, i as isRef, E as ErrorBoundary, B as Block, b as useIsomorphicLayoutEffect, d as unmountComponentAtNode } from './index-6f0019d1.esm.js';\nexport { t as ReactThreeFiber, w as _roots, v as act, o as addAfterEffect, n as addEffect, p as addTail, m as advance, j as applyProps, f as context, c as createEvents, g as createPortal, a as createRoot, k as dispose, e as extend, q as flushGlobalEffects, s as getRootState, l as invalidate, h as reconciler, r as render, d as unmountComponentAtNode, A as useFrame, C as useGraph, x as useInstanceHandle, D as useLoader, y as useStore, z as useThree } from './index-6f0019d1.esm.js';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport useMeasure from 'react-use-measure';\nimport { FiberProvider, useContextBridge } from 'its-fine';\nimport 'react-reconciler/constants';\nimport 'zustand';\nimport 'react-reconciler';\nimport 'scheduler';\nimport 'suspend-react';\n\nconst DOM_EVENTS = {\n  onClick: ['click', false],\n  onContextMenu: ['contextmenu', false],\n  onDoubleClick: ['dblclick', false],\n  onWheel: ['wheel', true],\n  onPointerDown: ['pointerdown', true],\n  onPointerUp: ['pointerup', true],\n  onPointerLeave: ['pointerleave', true],\n  onPointerMove: ['pointermove', true],\n  onPointerCancel: ['pointercancel', true],\n  onLostPointerCapture: ['lostpointercapture', true]\n};\n/** Default R3F event manager for web */\n\nfunction createPointerEvents(store) {\n  const {\n    handlePointer\n  } = createEvents(store);\n  return {\n    priority: 1,\n    enabled: true,\n\n    compute(event, state, previous) {\n      // https://github.com/pmndrs/react-three-fiber/pull/782\n      // Events trigger outside of canvas when moved, use offsetX/Y by default and allow overrides\n      state.pointer.set(event.offsetX / state.size.width * 2 - 1, -(event.offsetY / state.size.height) * 2 + 1);\n      state.raycaster.setFromCamera(state.pointer, state.camera);\n    },\n\n    connected: undefined,\n    handlers: Object.keys(DOM_EVENTS).reduce((acc, key) => ({ ...acc,\n      [key]: handlePointer(key)\n    }), {}),\n    connect: target => {\n      var _events$handlers;\n\n      const {\n        set,\n        events\n      } = store.getState();\n      events.disconnect == null ? void 0 : events.disconnect();\n      set(state => ({\n        events: { ...state.events,\n          connected: target\n        }\n      }));\n      Object.entries((_events$handlers = events.handlers) != null ? _events$handlers : []).forEach(([name, event]) => {\n        const [eventName, passive] = DOM_EVENTS[name];\n        target.addEventListener(eventName, event, {\n          passive\n        });\n      });\n    },\n    disconnect: () => {\n      const {\n        set,\n        events\n      } = store.getState();\n\n      if (events.connected) {\n        var _events$handlers2;\n\n        Object.entries((_events$handlers2 = events.handlers) != null ? _events$handlers2 : []).forEach(([name, event]) => {\n          if (events && events.connected instanceof HTMLElement) {\n            const [eventName] = DOM_EVENTS[name];\n            events.connected.removeEventListener(eventName, event);\n          }\n        });\n        set(state => ({\n          events: { ...state.events,\n            connected: undefined\n          }\n        }));\n      }\n    }\n  };\n}\n\nconst CanvasImpl = /*#__PURE__*/React.forwardRef(function Canvas({\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = createPointerEvents,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  onPointerMissed,\n  onCreated,\n  ...props\n}, forwardedRef) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  React.useMemo(() => extend(THREE), []);\n  const Bridge = useContextBridge();\n  const [containerRef, containerRect] = useMeasure({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = React.useRef(null);\n  const divRef = React.useRef(null);\n  const [canvas, setCanvas] = React.useState(null);\n  React.useImperativeHandle(forwardedRef, () => canvasRef.current);\n  const handlePointerMissed = useMutableCallback(onPointerMissed);\n  const [block, setBlock] = React.useState(false);\n  const [error, setError] = React.useState(false); // Suspend this component if block is a promise (2nd run)\n\n  if (block) throw block; // Throw exception outwards if anything within canvas throws\n\n  if (error) throw error;\n  const root = React.useRef(null);\n\n  if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n    if (!root.current) root.current = createRoot(canvas);\n    root.current.configure({\n      gl,\n      events,\n      shadows,\n      linear,\n      flat,\n      legacy,\n      orthographic,\n      frameloop,\n      dpr,\n      performance,\n      raycaster,\n      camera,\n      size: containerRect,\n      // Pass mutable reference to onPointerMissed so it's free to update\n      onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n      onCreated: state => {\n        // Connect to event source\n        state.events.connect == null ? void 0 : state.events.connect(eventSource ? isRef(eventSource) ? eventSource.current : eventSource : divRef.current); // Set up compute function\n\n        if (eventPrefix) {\n          state.setEvents({\n            compute: (event, state) => {\n              const x = event[eventPrefix + 'X'];\n              const y = event[eventPrefix + 'Y'];\n              state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n              state.raycaster.setFromCamera(state.pointer, state.camera);\n            }\n          });\n        } // Call onCreated callback\n\n\n        onCreated == null ? void 0 : onCreated(state);\n      }\n    });\n    root.current.render( /*#__PURE__*/React.createElement(Bridge, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      set: setError\n    }, /*#__PURE__*/React.createElement(React.Suspense, {\n      fallback: /*#__PURE__*/React.createElement(Block, {\n        set: setBlock\n      })\n    }, children))));\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    setCanvas(canvasRef.current);\n  }, []);\n  React.useEffect(() => {\n    if (canvas) return () => unmountComponentAtNode(canvas);\n  }, [canvas]); // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    }\n  }, props), /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '100%',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'block'\n    }\n  }, fallback)));\n});\n/**\n * A DOM canvas which accepts threejs elements as children.\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\n */\n\nconst Canvas = /*#__PURE__*/React.forwardRef(function CanvasWrapper(props, ref) {\n  return /*#__PURE__*/React.createElement(FiberProvider, null, /*#__PURE__*/React.createElement(CanvasImpl, _extends({}, props, {\n    ref: ref\n  })));\n});\n\nexport { Canvas, createPointerEvents as events };\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}"],"names":["_ray","Ray","_plane","Plane","TILT_LIMIT","Math","cos","PI","moduloWrapAround","offset","capacity","OrbitControls","object","domElement","__publicField","Vector3","Infinity","LEFT","UP","RIGHT","BOTTOM","MOUSE","MIDDLE","ONE","TOUCH","TWO","target0","target","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","setPolarAngle","value","currentPhi","phiDist","abs","sphericalDelta","scope","update","setAzimuthalAngle","currentTheta","thetaDist","getDistance","distanceTo","listenToKeyEvents","addEventListener","onKeyDown","_domElementKeyEvents","stopListenToKeyEvents","removeEventListener","saveState","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","up","quat","Quaternion","setFromUnitVectors","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","autoRotate","rotateLeft","autoRotateSpeed","enableDamping","dampingFactor","min","minAzimuthAngle","max","maxAzimuthAngle","isFinite","minPolarAngle","maxPolarAngle","makeSafe","addScaledVector","panOffset","add","zoomToCursor","performCursorZoom","isOrthographicCamera","clampDistance","radius","scale","setFromSpherical","matrixAutoUpdate","updateMatrix","lookAt","zoomChanged","newRadius","PerspectiveCamera","isPerspectiveCamera","prevRadius","length","radiusDelta","dollyDirection","updateMatrixWorld","mouseBefore","mouse","x","y","minZoom","maxZoom","mouseAfter","console","warn","screenSpacePanning","set","transformDirection","matrix","multiplyScalar","origin","dot","direction","setFromNormalAndCoplanarPoint","OrthographicCamera","distanceToSquared","EPS","quaternion","connect","document","style","touchAction","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","dispose","ownerDocument","onPointerMove","onPointerUp","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","zoomSpeed","angle","reverseOrbit","reverseHorizontalOrbit","rotateUp","reverseVerticalOrbit","panLeft","v","distance","objectMatrix","panUp","crossVectors","pan","deltaX","deltaY","element","targetDistance","tan","fov","clientHeight","right","left","clientWidth","top","bottom","enablePan","dollyOut","dollyScale","enableZoom","dollyIn","updateMouseParameters","event","rect","getBoundingClientRect","clientX","clientY","w","width","h","height","unproject","normalize","dist","minDistance","maxDistance","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","rotateSpeed","handleTouchMovePan","panSpeed","handleTouchMoveDolly","enabled","push","addPointer","pointerType","trackPointer","touches","enableRotate","onTouchStart","mouseAction","button","mouseButtons","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","pointerId","preventDefault","handleMouseWheel","needsUpdate","code","keys","keyPanSpeed","handleKeyDown","i","pointer","EventDispatcher","React","ref","makeDefault","camera","regress","keyEvents","onChange","onStart","onEnd","restProps","invalidate","useThree","defaultCamera","gl","events","setEvents","get","performance","explCamera","explDomElement","connected","controls","OrbitControls$1","useFrame","callback","e","onStartCb","onEndCb","old","_extends","isCubeTexture","def","GroundProjectedEnv","texture","options","isCubeMap","cubeSize","_b","_a","image","_lodMax","floor","log2","_cubeSize","fragmentShader","join","parseInt","REVISION","uniforms","map","geometry","IcosahedronGeometry","material","ShaderMaterial","vertexShader","side","DoubleSide","this","Mesh","RGBELoader","manager","HalfFloatType","buffer","rgbe_error","rgbe_error_code","msg","error","fgets","lineLimit","consume","p","pos","len","s","chunk","String","fromCharCode","apply","Uint16Array","subarray","indexOf","byteLength","slice","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","DataUtils","byteArray","Uint8Array","rgbe_header_info","line","match","gamma_re","exposure_re","format_re","dimensions_re","header","valid","string","comments","programtype","format","gamma","exposure","charAt","parseFloat","RGBE_ReadHeader","image_rgba_data","scanline_width","data_rgba","ptr_end","rgbeStart","scanline_buffer","num_scanlines","ptr","count","isEncodedRun","byteValue","l","off","RGBE_ReadPixels_RLE","data","numElements","FloatType","floatArray","Float32Array","j","halfArray","url","onLoad","onProgress","onError","texData","colorSpace","encoding","minFilter","LinearFilter","magFilter","generateMipmaps","flipY","DataTextureLoader","presetsObj","apartment","city","dawn","forest","lobby","night","park","studio","sunset","warehouse","CUBEMAP_ROOT","useEnvironment","files","path","preset","undefined","extensions","Error","Object","Array","isArray","loader","CubeTextureLoader","loaderResult","useLoader","setPath","mapping","CubeReflectionMapping","EquirectangularReflectionMapping","sRGBEncoding","LinearEncoding","resolveScene","scene","obj","current","isScene","setEnvProps","background","defaultScene","blur","oldbg","oldenv","environment","oldBlur","backgroundBlurriness","EnvironmentMap","EnvironmentCube","EnvironmentPortal","children","near","far","resolution","frames","Scene","virtualScene","fbo","WebGLCubeRenderTarget","createPortal","args","EnvironmentGround","props","_props$ground","_props$ground2","_scale","_props$ground3","textureDefault","extend","GroundProjectedEnvImpl","ground","Environment","HorizontalBlurShader","tDiffuse","VerticalBlurShader","ContactShadows","fref","opacity","smooth","color","depthWrite","renderOrder","shadowCamera","initialBackground","initialOverrideMaterial","renderTarget","THREE","renderTargetBlur","planeGeometry","rotateX","blurPlane","depthMaterial","depthTest","onBeforeCompile","shader","ucolor","replace","horizontalBlurMaterial","verticalBlurMaterial","blurShadows","visible","setRenderTarget","render","overrideMaterial","rotation","transparent","Center","fRef","disable","disableX","disableY","disableZ","front","back","onCentered","precise","cacheKey","outer","inner","matrixWorld","identity","box3","Box3","setFromObject","center","sphere","Sphere","depth","z","getCenter","getBoundingSphere","vAlign","hAlign","dAlign","parent","container","boundingBox","boundingSphere","verticalAlignment","horizontalAlignment","depthAlignment","shaderMaterial","onInit","parameters","entries","reduce","acc","name","uniform","key","forEach","defineProperty","assign","DiscardMaterial","accumulativeContext","SoftShadowMaterial","blend","alphaTest","AccumulativeShadows","forwardRef","temporal","limit","colorBlend","toneMapped","gPlane","gLights","ProgressiveLightMap","plm","configure","api","lights","Map","getMesh","clear","prepare","light","finish","traverse","Provider","receiveShadow","progressiveLightMap2","RandomizedLight","castShadow","bias","mapSize","size","amount","intensity","ambient","random","lambda","acos","sin","group","uuid","delete","from","_","index","attach","renderer","res","buffer1Active","meshes","clearColor","clearAlpha","test","navigator","userAgent","progressiveLightMap1","discardMat","targetMat","fog","previousShadowMap","averagingWindow","bodyStart","getClearColor","getClearAlpha","setClearColor","isGeometry","isLight","mesh","blendWindow","activeMap","inactiveMap","oldBg","isOrthographic","isBox3","context","Bounds","damping","fit","clip","observe","margin","eps","onFit","onFitRef","equals","a","b","damp","t","delta","animating","focus","goal","box","getSize","maxSize","fitHeightDistance","atan","fitWidthDistance","aspect","refresh","updateWorldMatrix","isEmpty","setFromCenterAndSize","constructor","newPos","to","maxHeight","maxWidth","vertices","applyMatrix4","matrixWorldInverse","zoomForHeight","zoomForWidth","presets","rembrandt","main","fill","portrait","upfront","soft","Refit","adjustCamera","Stage","_bias","_normalBias","_size","_offset","_amount","_radius","_ambient","_intensity","shadows","config","shadowBias","normalBias","shadowSize","shadowOffset","contactShadow","accumulativeShadow","shadowSpread","environmentProps","penumbra","Number","useMeasure","_temp","debounce","scroll","offsetSize","polyfill","ResizeObserver","window","useState","bounds","useRef","scrollContainers","resizeObserver","lastBounds","scrollDebounce","resizeDebounce","resize","mounted","useEffect","useMemo","HTMLElement","offsetHeight","offsetWidth","freeze","areBoundsEqual","createDebounce","forceRefresh","resizeChange","scrollChange","removeListeners","disconnect","addListeners","scrollContainer","capture","passive","onScroll","onWindowResize","Boolean","cb","node","findScrollContainers","result","body","getComputedStyle","overflow","overflowX","overflowY","some","prop","parentElement","every","traverseFiber","fiber","ascending","selector","child","return","sibling","wrapContext","defineProperties","_currentRenderer","_currentRenderer2","FiberContext","FiberProvider","_reactInternals","ReactCurrentOwner","ReactCurrentDispatcher","useFiber","root","id","memoizedState","next","DOM_EVENTS","onClick","onDoubleClick","onWheel","onPointerLeave","onLostPointerCapture","createPointerEvents","store","handlePointer","createEvents","priority","compute","previous","offsetX","offsetY","raycaster","setFromCamera","handlers","_events$handlers","getState","eventName","_events$handlers2","CanvasImpl","forwardedRef","fallback","eventSource","eventPrefix","linear","flat","legacy","orthographic","frameloop","dpr","onPointerMissed","onCreated","Bridge","contexts","_context","has","readContext","Prev","__spreadProps","useContextBridge","containerRef","containerRect","canvasRef","divRef","canvas","setCanvas","handlePointerMissed","useMutableCallback","block","setBlock","setError","createRoot","isRef","ErrorBoundary","Block","useIsomorphicLayoutEffect","unmountComponentAtNode","pointerEvents","display","Canvas","func","wait","immediate","timeout","timestamp","later","last","Date","now","setTimeout","debounced","arguments","callNow","clearTimeout","flush","module","exports","bind","source","prototype","hasOwnProperty","call"],"sourceRoot":""}