(self.webpackChunkxrcweb=self.webpackChunkxrcweb||[]).push([[58],{6015:function(e,t,n){"use strict";n.d(t,{z:function(){return w}});var r=n(4925),o=n(7462),a=n(5325),i=n(2791),c=n(3144),u=n(5671),s=n(7326),l=n(136),d=n(9388),f=n(7760),m=Object.defineProperty,v=function(e,t,n){return function(e,t,n){t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},p=new f.Ray,h=new f.Plane,g=Math.cos(Math.PI/180*70),b=function(e,t){return(e%t+t)%t},y=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var o;(0,u.Z)(this,n),o=t.call(this),v((0,s.Z)(o),"object"),v((0,s.Z)(o),"domElement"),v((0,s.Z)(o),"enabled",!0),v((0,s.Z)(o),"target",new f.Vector3),v((0,s.Z)(o),"minDistance",0),v((0,s.Z)(o),"maxDistance",1/0),v((0,s.Z)(o),"minZoom",0),v((0,s.Z)(o),"maxZoom",1/0),v((0,s.Z)(o),"minPolarAngle",0),v((0,s.Z)(o),"maxPolarAngle",Math.PI),v((0,s.Z)(o),"minAzimuthAngle",-1/0),v((0,s.Z)(o),"maxAzimuthAngle",1/0),v((0,s.Z)(o),"enableDamping",!1),v((0,s.Z)(o),"dampingFactor",.05),v((0,s.Z)(o),"enableZoom",!0),v((0,s.Z)(o),"zoomSpeed",1),v((0,s.Z)(o),"enableRotate",!0),v((0,s.Z)(o),"rotateSpeed",1),v((0,s.Z)(o),"enablePan",!0),v((0,s.Z)(o),"panSpeed",1),v((0,s.Z)(o),"screenSpacePanning",!0),v((0,s.Z)(o),"keyPanSpeed",7),v((0,s.Z)(o),"zoomToCursor",!1),v((0,s.Z)(o),"autoRotate",!1),v((0,s.Z)(o),"autoRotateSpeed",2),v((0,s.Z)(o),"reverseOrbit",!1),v((0,s.Z)(o),"reverseHorizontalOrbit",!1),v((0,s.Z)(o),"reverseVerticalOrbit",!1),v((0,s.Z)(o),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),v((0,s.Z)(o),"mouseButtons",{LEFT:f.MOUSE.ROTATE,MIDDLE:f.MOUSE.DOLLY,RIGHT:f.MOUSE.PAN}),v((0,s.Z)(o),"touches",{ONE:f.TOUCH.ROTATE,TWO:f.TOUCH.DOLLY_PAN}),v((0,s.Z)(o),"target0"),v((0,s.Z)(o),"position0"),v((0,s.Z)(o),"zoom0"),v((0,s.Z)(o),"_domElementKeyEvents",null),v((0,s.Z)(o),"getPolarAngle"),v((0,s.Z)(o),"getAzimuthalAngle"),v((0,s.Z)(o),"setPolarAngle"),v((0,s.Z)(o),"setAzimuthalAngle"),v((0,s.Z)(o),"getDistance"),v((0,s.Z)(o),"listenToKeyEvents"),v((0,s.Z)(o),"stopListenToKeyEvents"),v((0,s.Z)(o),"saveState"),v((0,s.Z)(o),"reset"),v((0,s.Z)(o),"update"),v((0,s.Z)(o),"connect"),v((0,s.Z)(o),"dispose"),o.object=e,o.domElement=r,o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o.getPolarAngle=function(){return E.phi},o.getAzimuthalAngle=function(){return E.theta},o.setPolarAngle=function(e){var t=b(e,2*Math.PI),n=E.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),w.phi=t-n,a.update()},o.setAzimuthalAngle=function(e){var t=b(e,2*Math.PI),n=E.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),w.theta=t-n,a.update()},o.getDistance=function(){return a.object.position.distanceTo(a.target)},o.listenToKeyEvents=function(e){e.addEventListener("keydown",ce),o._domElementKeyEvents=e},o.stopListenToKeyEvents=function(){o._domElementKeyEvents.removeEventListener("keydown",ce),o._domElementKeyEvents=null},o.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},o.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(i),a.update(),m=d.NONE},o.update=function(){var t=new f.Vector3,n=new f.Vector3(0,1,0),r=(new f.Quaternion).setFromUnitVectors(e.up,n),o=r.clone().invert(),c=new f.Vector3,u=new f.Quaternion,s=2*Math.PI;return function(){var l=a.object.position;r.setFromUnitVectors(e.up,n),o.copy(r).invert(),t.copy(l).sub(a.target),t.applyQuaternion(r),E.setFromVector3(t),a.autoRotate&&m===d.NONE&&I(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(E.theta+=w.theta*a.dampingFactor,E.phi+=w.phi*a.dampingFactor):(E.theta+=w.theta,E.phi+=w.phi);var v=a.minAzimuthAngle,b=a.maxAzimuthAngle;isFinite(v)&&isFinite(b)&&(v<-Math.PI?v+=s:v>Math.PI&&(v-=s),b<-Math.PI?b+=s:b>Math.PI&&(b-=s),E.theta=v<=b?Math.max(v,Math.min(b,E.theta)):E.theta>(v+b)/2?Math.max(v,E.theta):Math.min(b,E.theta)),E.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,E.phi)),E.makeSafe(),!0===a.enableDamping?a.target.addScaledVector(M,a.dampingFactor):a.target.add(M),a.zoomToCursor&&U||a.object.isOrthographicCamera?E.radius=X(E.radius):E.radius=X(E.radius*x),t.setFromSpherical(E),t.applyQuaternion(o),l.copy(a.target).add(t),a.object.matrixAutoUpdate||a.object.updateMatrix(),a.object.lookAt(a.target),!0===a.enableDamping?(w.theta*=1-a.dampingFactor,w.phi*=1-a.dampingFactor,M.multiplyScalar(1-a.dampingFactor)):(w.set(0,0,0),M.set(0,0,0));var Z=!1;if(a.zoomToCursor&&U){var P=null;if(a.object instanceof f.PerspectiveCamera&&a.object.isPerspectiveCamera){var C=t.length(),O=C-(P=X(C*x));a.object.position.addScaledVector(L,O),a.object.updateMatrixWorld()}else if(a.object.isOrthographicCamera){var T=new f.Vector3(D.x,D.y,0);T.unproject(a.object),a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/x)),a.object.updateProjectionMatrix(),Z=!0;var z=new f.Vector3(D.x,D.y,0);z.unproject(a.object),a.object.position.sub(z).add(T),a.object.updateMatrixWorld(),P=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),a.zoomToCursor=!1;null!==P&&(a.screenSpacePanning?a.target.set(0,0,-1).transformDirection(a.object.matrix).multiplyScalar(P).add(a.object.position):(p.origin.copy(a.object.position),p.direction.set(0,0,-1).transformDirection(a.object.matrix),Math.abs(a.object.up.dot(p.direction))<g?e.lookAt(a.target):(h.setFromNormalAndCoplanarPoint(a.object.up,a.target),p.intersectPlane(h,a.target))))}else a.object instanceof f.OrthographicCamera&&a.object.isOrthographicCamera&&(Z=1!==x)&&(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/x)),a.object.updateProjectionMatrix());return x=1,U=!1,!!(Z||c.distanceToSquared(a.object.position)>y||8*(1-u.dot(a.object.quaternion))>y)&&(a.dispatchEvent(i),c.copy(a.object.position),u.copy(a.object.quaternion),Z=!1,!0)}}(),o.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.domElement=e,a.domElement.style.touchAction="none",a.domElement.addEventListener("contextmenu",ue),a.domElement.addEventListener("pointerdown",ne),a.domElement.addEventListener("pointercancel",ae),a.domElement.addEventListener("wheel",ie)},o.dispose=function(){var e,t,n,r,o,i;null==(e=a.domElement)||e.removeEventListener("contextmenu",ue),null==(t=a.domElement)||t.removeEventListener("pointerdown",ne),null==(n=a.domElement)||n.removeEventListener("pointercancel",ae),null==(r=a.domElement)||r.removeEventListener("wheel",ie),null==(o=a.domElement)||o.ownerDocument.removeEventListener("pointermove",re),null==(i=a.domElement)||i.ownerDocument.removeEventListener("pointerup",oe),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",ce)};var a=(0,s.Z)(o),i={type:"change"},c={type:"start"},l={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},m=d.NONE,y=1e-6,E=new f.Spherical,w=new f.Spherical,x=1,M=new f.Vector3,Z=new f.Vector2,P=new f.Vector2,C=new f.Vector2,O=new f.Vector2,T=new f.Vector2,z=new f.Vector2,S=new f.Vector2,j=new f.Vector2,k=new f.Vector2,L=new f.Vector3,D=new f.Vector2,U=!1,A=[],R={};function _(){return Math.pow(.95,a.zoomSpeed)}function I(e){a.reverseOrbit||a.reverseHorizontalOrbit?w.theta+=e:w.theta-=e}function F(e){a.reverseOrbit||a.reverseVerticalOrbit?w.phi+=e:w.phi-=e}var V=function(){var e=new f.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),M.add(e)}}(),N=function(){var e=new f.Vector3;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),M.add(e)}}(),H=function(){var e=new f.Vector3;return function(t,n){var r=a.domElement;if(r&&a.object instanceof f.PerspectiveCamera&&a.object.isPerspectiveCamera){var o=a.object.position;e.copy(o).sub(a.target);var i=e.length();i*=Math.tan(a.object.fov/2*Math.PI/180),V(2*t*i/r.clientHeight,a.object.matrix),N(2*n*i/r.clientHeight,a.object.matrix)}else r&&a.object instanceof f.OrthographicCamera&&a.object.isOrthographicCamera?(V(t*(a.object.right-a.object.left)/a.object.zoom/r.clientWidth,a.object.matrix),N(n*(a.object.top-a.object.bottom)/a.object.zoom/r.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function B(e){a.object instanceof f.PerspectiveCamera&&a.object.isPerspectiveCamera||a.object instanceof f.OrthographicCamera&&a.object.isOrthographicCamera?x/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function Y(e){a.object instanceof f.PerspectiveCamera&&a.object.isPerspectiveCamera||a.object instanceof f.OrthographicCamera&&a.object.isOrthographicCamera?x*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function W(e){if(a.zoomToCursor&&a.domElement){U=!0;var t=a.domElement.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=t.width,i=t.height;D.x=n/o*2-1,D.y=-r/i*2+1,L.set(D.x,D.y,1).unproject(a.object).sub(a.object.position).normalize()}}function X(e){return Math.max(a.minDistance,Math.min(a.maxDistance,e))}function G(e){Z.set(e.clientX,e.clientY)}function K(e){O.set(e.clientX,e.clientY)}function q(){if(1==A.length)Z.set(A[0].pageX,A[0].pageY);else{var e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);Z.set(e,t)}}function Q(){if(1==A.length)O.set(A[0].pageX,A[0].pageY);else{var e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);O.set(e,t)}}function $(){var e=A[0].pageX-A[1].pageX,t=A[0].pageY-A[1].pageY,n=Math.sqrt(e*e+t*t);S.set(0,n)}function J(e){if(1==A.length)P.set(e.pageX,e.pageY);else{var t=de(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);P.set(n,r)}C.subVectors(P,Z).multiplyScalar(a.rotateSpeed);var o=a.domElement;o&&(I(2*Math.PI*C.x/o.clientHeight),F(2*Math.PI*C.y/o.clientHeight)),Z.copy(P)}function ee(e){if(1==A.length)T.set(e.pageX,e.pageY);else{var t=de(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);T.set(n,r)}z.subVectors(T,O).multiplyScalar(a.panSpeed),H(z.x,z.y),O.copy(T)}function te(e){var t=de(e),n=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(n*n+r*r);j.set(0,o),k.set(0,Math.pow(j.y/S.y,a.zoomSpeed)),B(k.y),S.copy(j)}function ne(e){var t,n;!1!==a.enabled&&(0===A.length&&(null==(t=a.domElement)||t.ownerDocument.addEventListener("pointermove",re),null==(n=a.domElement)||n.ownerDocument.addEventListener("pointerup",oe)),function(e){A.push(e)}(e),"touch"===e.pointerType?function(e){switch(le(e),A.length){case 1:switch(a.touches.ONE){case f.TOUCH.ROTATE:if(!1===a.enableRotate)return;q(),m=d.TOUCH_ROTATE;break;case f.TOUCH.PAN:if(!1===a.enablePan)return;Q(),m=d.TOUCH_PAN;break;default:m=d.NONE}break;case 2:switch(a.touches.TWO){case f.TOUCH.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;a.enableZoom&&$(),a.enablePan&&Q(),m=d.TOUCH_DOLLY_PAN;break;case f.TOUCH.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;a.enableZoom&&$(),a.enableRotate&&q(),m=d.TOUCH_DOLLY_ROTATE;break;default:m=d.NONE}break;default:m=d.NONE}m!==d.NONE&&a.dispatchEvent(c)}(e):function(e){var t;switch(e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case f.MOUSE.DOLLY:if(!1===a.enableZoom)return;!function(e){W(e),S.set(e.clientX,e.clientY)}(e),m=d.DOLLY;break;case f.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;K(e),m=d.PAN}else{if(!1===a.enableRotate)return;G(e),m=d.ROTATE}break;case f.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;G(e),m=d.ROTATE}else{if(!1===a.enablePan)return;K(e),m=d.PAN}break;default:m=d.NONE}m!==d.NONE&&a.dispatchEvent(c)}(e))}function re(e){!1!==a.enabled&&("touch"===e.pointerType?function(e){switch(le(e),m){case d.TOUCH_ROTATE:if(!1===a.enableRotate)return;J(e),a.update();break;case d.TOUCH_PAN:if(!1===a.enablePan)return;ee(e),a.update();break;case d.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&te(e),a.enablePan&&ee(e)}(e),a.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&te(e),a.enableRotate&&J(e)}(e),a.update();break;default:m=d.NONE}}(e):function(e){if(!1===a.enabled)return;switch(m){case d.ROTATE:if(!1===a.enableRotate)return;!function(e){P.set(e.clientX,e.clientY),C.subVectors(P,Z).multiplyScalar(a.rotateSpeed);var t=a.domElement;t&&(I(2*Math.PI*C.x/t.clientHeight),F(2*Math.PI*C.y/t.clientHeight)),Z.copy(P),a.update()}(e);break;case d.DOLLY:if(!1===a.enableZoom)return;!function(e){j.set(e.clientX,e.clientY),k.subVectors(j,S),k.y>0?B(_()):k.y<0&&Y(_()),S.copy(j),a.update()}(e);break;case d.PAN:if(!1===a.enablePan)return;!function(e){T.set(e.clientX,e.clientY),z.subVectors(T,O).multiplyScalar(a.panSpeed),H(z.x,z.y),O.copy(T),a.update()}(e)}}(e))}function oe(e){var t,n,r;se(e),0===A.length&&(null==(t=a.domElement)||t.releasePointerCapture(e.pointerId),null==(n=a.domElement)||n.ownerDocument.removeEventListener("pointermove",re),null==(r=a.domElement)||r.ownerDocument.removeEventListener("pointerup",oe)),a.dispatchEvent(l),m=d.NONE}function ae(e){se(e)}function ie(e){!1===a.enabled||!1===a.enableZoom||m!==d.NONE&&m!==d.ROTATE||(e.preventDefault(),a.dispatchEvent(c),function(e){W(e),e.deltaY<0?Y(_()):e.deltaY>0&&B(_()),a.update()}(e),a.dispatchEvent(l))}function ce(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:H(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:H(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:H(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:H(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function ue(e){!1!==a.enabled&&e.preventDefault()}function se(e){delete R[e.pointerId];for(var t=0;t<A.length;t++)if(A[t].pointerId==e.pointerId)return void A.splice(t,1)}function le(e){var t=R[e.pointerId];void 0===t&&(t=new f.Vector2,R[e.pointerId]=t),t.set(e.pageX,e.pageY)}function de(e){var t=e.pointerId===A[0].pointerId?A[1]:A[0];return R[t.pointerId]}return void 0!==r&&o.connect(r),o.update(),o}return(0,c.Z)(n)}(f.EventDispatcher),E=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],w=i.forwardRef((function(e,t){var n=e.makeDefault,c=e.camera,u=e.regress,s=e.domElement,l=e.enableDamping,d=void 0===l||l,f=e.keyEvents,m=void 0!==f&&f,v=e.onChange,p=e.onStart,h=e.onEnd,g=(0,r.Z)(e,E),b=(0,a.z)((function(e){return e.invalidate})),w=(0,a.z)((function(e){return e.camera})),x=(0,a.z)((function(e){return e.gl})),M=(0,a.z)((function(e){return e.events})),Z=(0,a.z)((function(e){return e.setEvents})),P=(0,a.z)((function(e){return e.set})),C=(0,a.z)((function(e){return e.get})),O=(0,a.z)((function(e){return e.performance})),T=c||w,z=s||M.connected||x.domElement,S=i.useMemo((function(){return new y(T)}),[T]);return(0,a.A)((function(){S.enabled&&S.update()}),-1),i.useEffect((function(){return m&&S.connect(!0===m?z:m),S.connect(z),function(){S.dispose()}}),[m,z,u,S,b]),i.useEffect((function(){var e=function(e){b(),u&&O.regress(),v&&v(e)},t=function(e){p&&p(e)},n=function(e){h&&h(e)};return S.addEventListener("change",e),S.addEventListener("start",t),S.addEventListener("end",n),function(){S.removeEventListener("start",t),S.removeEventListener("end",n),S.removeEventListener("change",e)}}),[v,p,h,S,b,Z]),i.useEffect((function(){if(n){var e=C().controls;return P({controls:S}),function(){return P({controls:e})}}}),[n,S]),i.createElement("primitive",(0,o.Z)({ref:t,object:S,enableDamping:d},g))}))},642:function(e,t,n){"use strict";n.d(t,{H:function(){return ne}});var r=n(1413),o=n(9439),a=n(4925),i=n(7462),c=n(2791),u=n(5325),s=n(7760),l=n(5671),d=n(3144),f=n(136),m=n(9388),v=function(e){return e&&e.isCubeTexture},p=function(e){(0,f.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var o,a;(0,l.Z)(this,n);var i=v(e),c=(null!=(a=i?null==(o=e.image[0])?void 0:o.width:e.image.width)?a:1024)/4,u=Math.floor(Math.log2(c)),d=Math.pow(2,u),f=3*Math.max(d,112),m=4*d,p=[i?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/f),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/m),"#define CUBEUV_MAX_MIP ".concat(u,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(parseInt(s.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),h={map:{value:e},height:{value:(null==r?void 0:r.height)||15},radius:{value:(null==r?void 0:r.radius)||100}},g=new s.IcosahedronGeometry(1,16),b=new s.ShaderMaterial({uniforms:h,fragmentShader:p,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:s.DoubleSide});return t.call(this,g,b)}return(0,d.Z)(n,[{key:"radius",get:function(){return this.material.uniforms.radius.value},set:function(e){this.material.uniforms.radius.value=e}},{key:"height",get:function(){return this.material.uniforms.height.value},set:function(e){this.material.uniforms.height.value=e}}]),n}(s.Mesh),h=n(1752),g=n(1120),b=function(e){(0,f.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).type=s.HalfFloatType,r}return(0,d.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,o=-1,a=0,i="",c=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(o=c.indexOf("\n"))&&a<t&&r<e.byteLength;)i+=c,a+=c.length,r+=128,c+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<o&&(!1!==n&&(e.pos+=a+o+1),i+c.slice(0,o))},r=function(e,t,n,r){var o=e[t+3],a=Math.pow(2,o-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},o=function(e,t,n,r){var o=e[t+3],a=Math.pow(2,o-128)/255;n[r+0]=s.DataUtils.toHalfFloat(Math.min(e[t+0]*a,65504)),n[r+1]=s.DataUtils.toHalfFloat(Math.min(e[t+1]*a,65504)),n[r+2]=s.DataUtils.toHalfFloat(Math.min(e[t+2]*a,65504)),n[r+3]=s.DataUtils.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;var i=function(e){var r,o,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(o=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=o[1],s.string+=r+"\n";!1!==(r=n(e));)if(s.string+=r+"\n","#"!==r.charAt(0)){if((o=r.match(a))&&(s.gamma=parseFloat(o[1])),(o=r.match(i))&&(s.exposure=parseFloat(o[1])),(o=r.match(c))&&(s.valid|=2,s.format=o[1]),(o=r.match(u))&&(s.valid|=4,s.height=parseInt(o[1],10),s.width=parseInt(o[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=r+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==i){var c=i.width,u=i.height,l=function(e,n,r){var o=n;if(o<8||o>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(o!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var a=new Uint8Array(4*n*r);if(!a.length)return t(4,"unable to allocate buffer space");for(var i=0,c=0,u=4*o,s=new Uint8Array(4),l=new Uint8Array(u),d=r;d>0&&c<e.byteLength;){if(c+4>e.byteLength)return t(1);if(s[0]=e[c++],s[1]=e[c++],s[2]=e[c++],s[3]=e[c++],2!=s[0]||2!=s[1]||(s[2]<<8|s[3])!=o)return t(3,"bad rgbe scanline format");for(var f=0,m=void 0;f<u&&c<e.byteLength;){var v=(m=e[c++])>128;if(v&&(m-=128),0===m||f+m>u)return t(3,"bad scanline data");if(v)for(var p=e[c++],h=0;h<m;h++)l[f++]=p;else l.set(e.subarray(c,c+m),f),f+=m,c+=m}for(var g=o,b=0;b<g;b++){var y=0;a[i]=l[b+y],y+=o,a[i+1]=l[b+y],y+=o,a[i+2]=l[b+y],y+=o,a[i+3]=l[b+y],i+=4}d--}return a}(a.subarray(a.pos),c,u);if(-1!==l){var d,f,m;switch(this.type){case s.FloatType:m=l.length/4;for(var v=new Float32Array(4*m),p=0;p<m;p++)r(l,4*p,v,4*p);d=v,f=s.FloatType;break;case s.HalfFloatType:m=l.length/4;for(var h=new Uint16Array(4*m),g=0;g<m;g++)o(l,4*g,h,4*g);d=h,f=s.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:c,height:u,data:d,header:i.string,gamma:i.gamma,exposure:i.exposure,type:f}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,o){return(0,h.Z)((0,g.Z)(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case s.FloatType:case s.HalfFloatType:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,o)}}]),n}(s.DataTextureLoader),y={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},E="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/";function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files,n=void 0===t?["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"]:t,r=e.path,o=void 0===r?"":r,a=e.preset,i=void 0===a?void 0:a,c=e.encoding,l=void 0===c?void 0:c,d=e.extensions;if(i){if(!(i in y))throw new Error("Preset must be one of: "+Object.keys(y).join(", "));n=y[i],o=E}var f=Array.isArray(n),m=f?s.CubeTextureLoader:b,v=(0,u.D)(m,f?[n]:n,(function(e){e.setPath(o),d&&d(e)})),p=f?v[0]:v;return p.mapping=f?s.CubeReflectionMapping:s.EquirectangularReflectionMapping,p.encoding=(null!==l&&void 0!==l?l:f)?s.sRGBEncoding:s.LinearEncoding,p}var x=["background","scene","blur"],M=function(e){return(t=e).current&&t.current.isScene?e.current:e;var t};function Z(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=M(t||n),i=a.background,c=a.environment,u=a.backgroundBlurriness||0;return"only"!==e&&(a.environment=r),e&&(a.background=r),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=o),function(){"only"!==e&&(a.environment=c),e&&(a.background=i),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=u)}}function P(e){var t=e.scene,n=e.background,r=void 0!==n&&n,o=e.blur,a=e.map,i=(0,u.z)((function(e){return e.scene}));return c.useLayoutEffect((function(){if(a)return Z(r,t,i,a,o)}),[i,t,a,r,o]),null}function C(e){var t=e.background,n=void 0!==t&&t,r=e.scene,o=e.blur,i=w((0,a.Z)(e,x)),s=(0,u.z)((function(e){return e.scene}));return c.useLayoutEffect((function(){return Z(n,r,s,i,o)}),[i,n,r,s,o]),null}function O(e){var t=e.children,n=e.near,r=void 0===n?1:n,a=e.far,i=void 0===a?1e3:a,l=e.resolution,d=void 0===l?256:l,f=e.frames,m=void 0===f?1:f,v=e.map,p=e.background,h=void 0!==p&&p,g=e.blur,b=e.scene,y=e.files,E=e.path,w=e.preset,x=void 0===w?void 0:w,M=e.extensions,O=(0,u.z)((function(e){return e.gl})),T=(0,u.z)((function(e){return e.scene})),z=c.useRef(null),S=c.useState((function(){return new s.Scene})),j=(0,o.Z)(S,1)[0],k=c.useMemo((function(){var e=new s.WebGLCubeRenderTarget(d);return e.texture.type=s.HalfFloatType,e}),[d]);c.useLayoutEffect((function(){return 1===m&&z.current.update(O,j),Z(h,b,T,k.texture,g)}),[t,j,k.texture,b,T,h,m,O]);var L=1;return(0,u.A)((function(){(m===1/0||L<m)&&(z.current.update(O,j),L++)})),c.createElement(c.Fragment,null,(0,u.g)(c.createElement(c.Fragment,null,t,c.createElement("cubeCamera",{ref:z,args:[r,i,k]}),y||x?c.createElement(C,{background:!0,files:y,preset:x,path:E,extensions:M}):v?c.createElement(P,{background:!0,map:v,extensions:M}):null),j))}function T(e){var t,n,r,o,a=w(e),s=e.map||a;c.useMemo((function(){return(0,u.e)({GroundProjectedEnvImpl:p})}),[]);var l=c.useMemo((function(){return[s]}),[s]),d=null==(t=e.ground)?void 0:t.height,f=null==(n=e.ground)?void 0:n.radius,m=null!==(r=null==(o=e.ground)?void 0:o.scale)&&void 0!==r?r:1e3;return c.createElement(c.Fragment,null,c.createElement(P,(0,i.Z)({},e,{map:s})),c.createElement("groundProjectedEnvImpl",{args:l,scale:m,height:d,radius:f}))}function z(e){return e.ground?c.createElement(T,e):e.map?c.createElement(P,e):e.children?c.createElement(O,e):c.createElement(C,e)}var S={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},j={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},k=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],L=c.forwardRef((function(e,t){var n=e.scale,l=void 0===n?10:n,d=e.frames,f=void 0===d?1/0:d,m=e.opacity,v=void 0===m?1:m,p=e.width,h=void 0===p?1:p,g=e.height,b=void 0===g?1:g,y=e.blur,E=void 0===y?1:y,w=e.far,x=void 0===w?10:w,M=e.resolution,Z=void 0===M?512:M,P=e.smooth,C=void 0===P||P,O=e.color,T=void 0===O?"#000000":O,z=e.depthWrite,L=void 0!==z&&z,D=e.renderOrder,U=(0,a.Z)(e,k),A=c.useRef(null),R=(0,u.z)((function(e){return e.scene})),_=(0,u.z)((function(e){return e.gl})),I=c.useRef(null);h*=Array.isArray(l)?l[0]:l||1,b*=Array.isArray(l)?l[1]:l||1;var F,V,N=c.useMemo((function(){var e=new s.WebGLRenderTarget(Z,Z),t=new s.WebGLRenderTarget(Z,Z);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var n=new s.PlaneGeometry(h,b).rotateX(Math.PI/2),o=new s.Mesh(n),a=new s.MeshDepthMaterial;a.depthTest=a.depthWrite=!1,a.onBeforeCompile=function(e){e.uniforms=(0,r.Z)((0,r.Z)({},e.uniforms),{},{ucolor:{value:new s.Color(T)}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};var i=new s.ShaderMaterial(S),c=new s.ShaderMaterial(j);return c.depthTest=i.depthTest=!1,[e,n,a,o,i,c,t]}),[Z,h,b,l,T]),H=(0,o.Z)(N,7),B=H[0],Y=H[1],W=H[2],X=H[3],G=H[4],K=H[5],q=H[6],Q=function(e){X.visible=!0,X.material=G,G.uniforms.tDiffuse.value=B.texture,G.uniforms.h.value=1*e/256,_.setRenderTarget(q),_.render(X,I.current),X.material=K,K.uniforms.tDiffuse.value=q.texture,K.uniforms.v.value=1*e/256,_.setRenderTarget(B),_.render(X,I.current),X.visible=!1},$=0;return(0,u.A)((function(){I.current&&(f===1/0||$<f)&&($++,F=R.background,V=R.overrideMaterial,A.current.visible=!1,R.background=null,R.overrideMaterial=W,_.setRenderTarget(B),_.render(R,I.current),Q(E),C&&Q(.4*E),_.setRenderTarget(null),A.current.visible=!0,R.overrideMaterial=V,R.background=F)})),c.useImperativeHandle(t,(function(){return A.current}),[]),c.createElement("group",(0,i.Z)({"rotation-x":Math.PI/2},U,{ref:A}),c.createElement("mesh",{renderOrder:D,geometry:Y,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},c.createElement("meshBasicMaterial",{transparent:!0,map:B.texture,opacity:v,depthWrite:L})),c.createElement("orthographicCamera",{ref:I,args:[-h/2,h/2,b/2,-b/2,0,x]}))})),D=["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"],U=c.forwardRef((function(e,t){var n=e.children,r=e.disable,o=e.disableX,u=e.disableY,l=e.disableZ,d=e.left,f=e.right,m=e.top,v=e.bottom,p=e.front,h=e.back,g=e.onCentered,b=e.precise,y=void 0===b||b,E=e.cacheKey,w=void 0===E?0:E,x=(0,a.Z)(e,D),M=c.useRef(null),Z=c.useRef(null),P=c.useRef(null);return c.useLayoutEffect((function(){Z.current.matrixWorld.identity();var e=(new s.Box3).setFromObject(P.current,y),t=new s.Vector3,n=new s.Sphere,a=e.max.x-e.min.x,i=e.max.y-e.min.y,c=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(n);var b=m?i/2:v?-i/2:0,E=d?-a/2:f?a/2:0,w=p?c/2:h?-c/2:0;Z.current.position.set(r||o?0:-t.x+E,r||u?0:-t.y+b,r||l?0:-t.z+w),"undefined"!==typeof g&&g({parent:M.current.parent,container:M.current,width:a,height:i,depth:c,boundingBox:e,boundingSphere:n,center:t,verticalAlignment:b,horizontalAlignment:E,depthAlignment:w})}),[w,g,m,d,p,r,o,u,l,y,f,v,h]),c.useImperativeHandle(t,(function(){return M.current}),[]),c.createElement("group",(0,i.Z)({ref:M},x),c.createElement("group",{ref:Z},c.createElement("group",{ref:P},n)))})),A=n(5647),R=n(3433),_=n(4942),I=n(7326);function F(e,t,n,a){var i=function(i){(0,f.Z)(u,i);var c=(0,m.Z)(u);function u(){var i,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.Z)(this,u);var f=Object.entries(e);return(i=c.call(this,{uniforms:f.reduce((function(e,t){var n=(0,o.Z)(t,2),a=n[0],i=n[1],c=s.UniformsUtils.clone((0,_.Z)({},a,{value:i}));return(0,r.Z)((0,r.Z)({},e),c)}),{}),vertexShader:t,fragmentShader:n})).key="",f.forEach((function(e){var t=(0,o.Z)(e,1)[0];return Object.defineProperty((0,I.Z)(i),t,{get:function(){return i.uniforms[t].value},set:function(e){return i.uniforms[t].value=e}})})),Object.assign((0,I.Z)(i),d),a&&a((0,I.Z)(i)),i}return(0,d.Z)(u)}(s.ShaderMaterial);return i.key=s.MathUtils.generateUUID(),i}var V=F({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),N=["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"],H=["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"];var B=c.createContext(null),Y=F({color:new s.Color,blend:2,alphaTest:.75,opacity:0,map:null},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }","varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <encodings_fragment>\n   }"),W=c.forwardRef((function(e,t){var n=e.children,r=e.temporal,i=e.frames,s=void 0===i?40:i,l=e.limit,d=void 0===l?1/0:l,f=e.blend,m=void 0===f?20:f,v=e.scale,p=void 0===v?10:v,h=e.opacity,g=void 0===h?1:h,b=e.alphaTest,y=void 0===b?.75:b,E=e.color,w=void 0===E?"black":E,x=e.colorBlend,M=void 0===x?2:x,Z=e.resolution,P=void 0===Z?1024:Z,C=e.toneMapped,O=void 0===C||C,T=(0,a.Z)(e,N);(0,u.e)({SoftShadowMaterial:Y});var z=(0,u.z)((function(e){return e.gl})),S=(0,u.z)((function(e){return e.scene})),j=(0,u.z)((function(e){return e.camera})),k=(0,u.z)((function(e){return e.invalidate})),L=c.useRef(null),D=c.useRef(null),U=c.useState((function(){return new G(z,S,P)})),A=(0,o.Z)(U,1)[0];c.useLayoutEffect((function(){A.configure(L.current)}),[]);var R=c.useMemo((function(){return{lights:new Map,temporal:!!r,frames:Math.max(2,s),blend:Math.max(2,s===1/0?m:s),count:0,getMesh:function(){return L.current},reset:function(){A.clear();var e=L.current.material;e.opacity=0,e.alphaTest=0,R.count=0},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=L.current.material;R.temporal?(t.opacity=Math.min(g,t.opacity+g/R.blend),t.alphaTest=Math.min(y,t.alphaTest+y/R.blend)):(t.opacity=g,t.alphaTest=y),D.current.visible=!0,A.prepare();for(var n=0;n<e;n++)R.lights.forEach((function(e){return e.update()})),A.update(j,R.blend);D.current.visible=!1,A.finish()}}}),[A,j,S,r,s,m,g,y]);return c.useLayoutEffect((function(){R.reset(),R.temporal||R.frames===1/0||R.update(R.blend)})),c.useImperativeHandle(t,(function(){return R}),[R]),(0,u.A)((function(){(R.temporal||R.frames===1/0)&&R.count<R.frames&&R.count<d&&(k(),R.update(),R.count++)})),c.createElement("group",T,c.createElement("group",{traverse:function(){return null},ref:D},c.createElement(B.Provider,{value:R},n)),c.createElement("mesh",{receiveShadow:!0,ref:L,scale:p,rotation:[-Math.PI/2,0,0]},c.createElement("planeGeometry",null),c.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:O,color:w,blend:M,map:A.progressiveLightMap2.texture})))})),X=c.forwardRef((function(e,t){var n=e.castShadow,r=void 0===n||n,o=e.bias,u=void 0===o?.001:o,l=e.mapSize,d=void 0===l?512:l,f=e.size,m=void 0===f?5:f,v=e.near,p=void 0===v?.5:v,h=e.far,g=void 0===h?500:h,b=(e.frames,e.position),y=void 0===b?[0,0,0]:b,E=e.radius,w=void 0===E?1:E,x=e.amount,M=void 0===x?8:x,Z=e.intensity,P=void 0===Z?1:Z,C=e.ambient,O=void 0===C?.5:C,T=(0,a.Z)(e,H),z=c.useRef(null),S=(0,A.Z)(s.Vector3,(0,R.Z)(y)).length(),j=c.useContext(B),k=c.useCallback((function(){var e;if(z.current)for(var t=0;t<z.current.children.length;t++)if(e=z.current.children[t],Math.random()>O)e.position.set(y[0]+s.MathUtils.randFloatSpread(w),y[1]+s.MathUtils.randFloatSpread(w),y[2]+s.MathUtils.randFloatSpread(w));else{var n=Math.acos(2*Math.random()-1)-Math.PI/2,r=2*Math.PI*Math.random();e.position.set(Math.cos(n)*Math.cos(r)*S,Math.abs(Math.cos(n)*Math.sin(r)*S),Math.sin(n)*S)}}),[w,O,S].concat((0,R.Z)(y))),L=c.useMemo((function(){return{update:k}}),[k]);return c.useImperativeHandle(t,(function(){return L}),[L]),c.useLayoutEffect((function(){var e=z.current;return j&&j.lights.set(e.uuid,L),function(){j.lights.delete(e.uuid)}}),[j,L]),c.createElement("group",(0,i.Z)({ref:z},T),Array.from({length:M},(function(e,t){return c.createElement("directionalLight",{key:t,castShadow:r,"shadow-bias":u,"shadow-mapSize":[d,d],intensity:P/M},c.createElement("orthographicCamera",{attach:"shadow-camera",args:[-m,m,m,-m,p,g]}))})))})),G=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024;(0,l.Z)(this,e),this.renderer=t,this.res=o,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new s.Color,this.clearAlpha=0;var a=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?s.HalfFloatType:s.FloatType;this.progressiveLightMap1=new s.WebGLRenderTarget(this.res,this.res,{type:a}),this.progressiveLightMap2=new s.WebGLRenderTarget(this.res,this.res,{type:a}),this.discardMat=new V,this.targetMat=new s.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=function(e){e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";var t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+"\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }",e.uniforms.previousShadowMap=r.previousShadowMap,e.uniforms.averagingWindow=r.averagingWindow}}return(0,d.Z)(e,[{key:"clear",value:function(){var e=this;this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse((function(t){!function(e){return!!e.geometry}(t)?function(e){return e.isLight}(t)&&e.lights.push({object:t,intensity:t.intensity}):e.meshes.push({object:t,material:t.material})}))}},{key:"prepare",value:function(){var e=this;this.lights.forEach((function(e){return e.object.intensity=0})),this.meshes.forEach((function(t){return t.object.material=e.discardMat}))}},{key:"finish",value:function(){this.lights.forEach((function(e){return e.object.intensity=e.intensity})),this.meshes.forEach((function(e){return e.object.material=e.material}))}},{key:"configure",value:function(e){this.object=e}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(this.object){this.averagingWindow.value=t,this.object.material=this.targetMat;var n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,o=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=o}}}]),e}(),K=function(e){return e&&e.isOrthographicCamera},q=function(e){return e&&e.isBox3},Q=c.createContext(null);function $(e){var t=e.children,n=e.damping,r=void 0===n?6:n,a=e.fit,i=e.clip,l=e.observe,d=e.margin,f=void 0===d?1.2:d,m=e.eps,v=void 0===m?.01:m,p=e.onFit,h=c.useRef(null),g=(0,u.z)(),b=g.camera,y=g.invalidate,E=g.size,w=g.controls,x=c.useRef(p);function M(e,t){return Math.abs(e.x-t.x)<v&&Math.abs(e.y-t.y)<v&&Math.abs(e.z-t.z)<v}function Z(e,t,n,r){e.x=s.MathUtils.damp(e.x,t.x,n,r),e.y=s.MathUtils.damp(e.y,t.y,n,r),e.z=s.MathUtils.damp(e.z,t.z,n,r)}x.current=p;var P=c.useState((function(){return{animating:!1,focus:new s.Vector3,camera:new s.Vector3,zoom:1}})),C=(0,o.Z)(P,1)[0],O=c.useState((function(){return{focus:new s.Vector3,camera:new s.Vector3,zoom:1}})),T=(0,o.Z)(O,1)[0],z=c.useState((function(){return new s.Box3})),S=(0,o.Z)(z,1)[0],j=c.useMemo((function(){function e(){var e=S.getSize(new s.Vector3),t=S.getCenter(new s.Vector3),n=Math.max(e.x,e.y,e.z),r=K(b)?4*n:n/(2*Math.atan(Math.PI*b.fov/360)),o=K(b)?4*n:r/b.aspect,a=f*Math.max(r,o);return{box:S,size:e,center:t,distance:a}}return{getSize:e,refresh:function(t){if(q(t))S.copy(t);else{var n=t||h.current;n.updateWorldMatrix(!0,!0),S.setFromObject(n)}if(S.isEmpty()){var r=b.position.length()||10;S.setFromCenterAndSize(new s.Vector3,new s.Vector3(r,r,r))}if("OrthographicTrackballControls"===(null==w?void 0:w.constructor.name)){var o=e().distance,a=b.position.clone().sub(w.target).normalize().multiplyScalar(o),i=w.target.clone().add(a);b.position.copy(i)}return this},clip:function(){var t=e().distance;return w&&(w.maxDistance=10*t),b.near=t/100,b.far=100*t,b.updateProjectionMatrix(),w&&w.update(),y(),this},to:function(t){var n,o=t.position,a=t.target;C.camera.copy(b.position);var i,c,u=e().center;((n=T.camera).set.apply(n,(0,R.Z)(o)),a)?(i=T.focus).set.apply(i,(0,R.Z)(a)):T.focus.copy(u);r?C.animating=!0:(c=b.position).set.apply(c,(0,R.Z)(o));return this},fit:function(){C.camera.copy(b.position),w&&C.focus.copy(w.target);var t=e(),n=t.center,o=t.distance,a=n.clone().sub(b.position).normalize().multiplyScalar(o);if(T.camera.copy(n).sub(a),T.focus.copy(n),K(b)){C.zoom=b.zoom;var i=0,c=0,u=[new s.Vector3(S.min.x,S.min.y,S.min.z),new s.Vector3(S.min.x,S.max.y,S.min.z),new s.Vector3(S.min.x,S.min.y,S.max.z),new s.Vector3(S.min.x,S.max.y,S.max.z),new s.Vector3(S.max.x,S.max.y,S.max.z),new s.Vector3(S.max.x,S.max.y,S.min.z),new s.Vector3(S.max.x,S.min.y,S.max.z),new s.Vector3(S.max.x,S.min.y,S.min.z)];n.applyMatrix4(b.matrixWorldInverse);for(var l=0,d=u;l<d.length;l++){var m=d[l];m.applyMatrix4(b.matrixWorldInverse),i=Math.max(i,Math.abs(m.y-n.y)),c=Math.max(c,Math.abs(m.x-n.x))}i*=2,c*=2;var v=(b.top-b.bottom)/i,p=(b.right-b.left)/c;T.zoom=Math.min(v,p)/f,r||(b.zoom=T.zoom,b.updateProjectionMatrix())}return r?C.animating=!0:(b.position.copy(T.camera),b.lookAt(T.focus),w&&(w.target.copy(T.focus),w.update())),x.current&&x.current(this.getSize()),y(),this}}}),[S,b,w,f,r,y]);c.useLayoutEffect((function(){if(w){var e=function(){return C.animating=!1};return w.addEventListener("start",e),function(){return w.removeEventListener("start",e)}}}),[w]);var k=c.useRef(0);return c.useLayoutEffect((function(){(l||0===k.current++)&&(j.refresh(),a&&j.fit(),i&&j.clip())}),[E,i,a,l,b,w]),(0,u.A)((function(e,t){if(C.animating){if(Z(C.focus,T.focus,r,t),Z(C.camera,T.camera,r,t),C.zoom=s.MathUtils.damp(C.zoom,T.zoom,r,t),b.position.copy(C.camera),K(b)&&(b.zoom=C.zoom,b.updateProjectionMatrix()),w?(w.target.copy(C.focus),w.update()):b.lookAt(C.focus),y(),K(b)&&!(Math.abs(C.zoom-T.zoom)<v))return;if(!K(b)&&!M(C.camera,T.camera))return;if(w&&!M(C.focus,T.focus))return;C.animating=!1}})),c.createElement("group",{ref:h},c.createElement(Q.Provider,{value:j},t))}var J=["children","center","adjustCamera","intensity","shadows","environment","preset"],ee={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function te(e){var t=e.radius,n=e.adjustCamera,r=c.useContext(Q);return c.useEffect((function(){n&&r.refresh().clip().fit()}),[t,n]),null}function ne(e){var t,n,u,s,l,d,f,m,v=e.children,p=e.center,h=e.adjustCamera,g=void 0===h||h,b=e.intensity,y=void 0===b?.5:b,E=e.shadows,w=void 0===E?"contact":E,x=e.environment,M=void 0===x?"city":x,Z=e.preset,P=void 0===Z?"rembrandt":Z,C=(0,a.Z)(e,J),O="string"===typeof P?ee[P]:P,T=c.useState({radius:0,width:0,height:0,depth:0}),S=(0,o.Z)(T,2),j=S[0],k=j.radius,D=j.height,A=S[1],R=null!==(t=null==w?void 0:w.bias)&&void 0!==t?t:-1e-4,_=null!==(n=null==w?void 0:w.normalBias)&&void 0!==n?n:0,I=null!==(u=null==w?void 0:w.size)&&void 0!==u?u:1024,F=null!==(s=null==w?void 0:w.offset)&&void 0!==s?s:0,V="contact"===w||"contact"===(null==w?void 0:w.type),N="accumulative"===w||"accumulative"===(null==w?void 0:w.type),H=(0,r.Z)({},"object"===typeof w?w:{}),B=M?"string"===typeof M?{preset:M}:M:null,Y=c.useCallback((function(e){var t=e.width,n=e.height,r=e.depth,o=e.boundingSphere;A({radius:o.radius,width:t,height:n,depth:r}),null!=p&&p.onCentered&&p.onCentered(e)}),[]);return c.createElement(c.Fragment,null,c.createElement("ambientLight",{intensity:y/3}),c.createElement("spotLight",{penumbra:1,position:[O.main[0]*k,O.main[1]*k,O.main[2]*k],intensity:2*y,castShadow:!!w,"shadow-bias":R,"shadow-normalBias":_,"shadow-mapSize":I}),c.createElement("pointLight",{position:[O.fill[0]*k,O.fill[1]*k,O.fill[2]*k],intensity:y}),c.createElement($,(0,i.Z)({fit:!!g,clip:!!g,margin:Number(g),observe:!0},C),c.createElement(te,{radius:k,adjustCamera:g}),c.createElement(U,(0,i.Z)({},p,{position:[0,F/2,0],onCentered:Y}),v)),c.createElement("group",{position:[0,-D/2-F/2,0]},V&&c.createElement(L,(0,i.Z)({scale:4*k,far:k,blur:2},H)),N&&c.createElement(W,(0,i.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:4*k},H),c.createElement(X,{amount:null!==(l=H.amount)&&void 0!==l?l:8,radius:null!==(d=H.radius)&&void 0!==d?d:k,ambient:null!==(f=H.ambient)&&void 0!==f?f:.5,intensity:null!==(m=H.intensity)&&void 0!==m?m:1,position:[O.main[0]*k,O.main[1]*k,O.main[2]*k],size:4*k,bias:-R,mapSize:I}))),M&&c.createElement(z,B))}},5892:function(e,t,n){"use strict";n.d(t,{Xz:function(){return B}});var r=n(4925),o=n(9439),a=n(4942),i=n(1413),c=n(5325),u=n(7462),s=n(2791),l=n(7760),d=n(3433),f=n(3144),m=n(5671),v=n(7494),p=n.n(v);function h(e){var t=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,n=t.debounce,r=t.scroll,a=t.polyfill,i=t.offsetSize,c=a||("undefined"===typeof window?(0,f.Z)((function e(){(0,m.Z)(this,e)})):window.ResizeObserver);if(!c)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var u=(0,s.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,o.Z)(u,2),d=l[0],v=l[1],h=(0,s.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d}),b=n?"number"===typeof n?n:n.scroll:null,E=n?"number"===typeof n?n:n.resize:null,w=(0,s.useRef)(!1);(0,s.useEffect)((function(){return w.current=!0,function(){w.current=!1}}));var x=(0,s.useMemo)((function(){var e=function(){if(h.current.element){var e=h.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};h.current.element instanceof HTMLElement&&i&&(t.height=h.current.element.offsetHeight,t.width=h.current.element.offsetWidth),Object.freeze(t),w.current&&!y(h.current.lastBounds,t)&&v(h.current.lastBounds=t)}};return[e,E?p()(e,E):e,b?p()(e,b):e]}),[v,i,b,E]),M=(0,o.Z)(x,3),Z=M[0],P=M[1],C=M[2];function O(){h.current.scrollContainers&&(h.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",C,!0)})),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function T(){h.current.element&&(h.current.resizeObserver=new c(C),h.current.resizeObserver.observe(h.current.element),r&&h.current.scrollContainers&&h.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",C,{capture:!0,passive:!0})})))}var z,S,j;return z=C,S=Boolean(r),(0,s.useEffect)((function(){if(S){var e=z;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[z,S]),j=P,(0,s.useEffect)((function(){var e=j;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[j]),(0,s.useEffect)((function(){O(),T()}),[r,C,P]),(0,s.useEffect)((function(){return O}),[]),[function(e){e&&e!==h.current.element&&(O(),h.current.element=e,h.current.scrollContainers=g(e),T())},d,Z]}function g(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,(0,d.Z)(g(e.parentElement)))}var b=["x","y","top","bottom","left","right","width","height"],y=function(e,t){return b.every((function(n){return e[n]===t[n]}))},E=n(136),w=n(9388),x=n(7762),M=Object.defineProperty,Z=Object.defineProperties,P=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,z=function(e,t,n){return t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},S=function(e,t){for(var n in t||(t={}))O.call(t,n)&&z(e,n,t[n]);if(C){var r,o=(0,x.Z)(C(t));try{for(o.s();!(r=o.n()).done;){n=r.value;T.call(t,n)&&z(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},j=function(e,t){return Z(e,P(t))};function k(e,t,n){if(e){if(!0===n(e))return e;for(var r=t?e.return:e.child;r;){var o=k(r,t,n);if(o)return o;r=t?null:r.sibling}}}function L(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var D=L(s.createContext(null)),U=function(e){(0,E.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){return s.createElement(D.Provider,{value:this._reactInternals},this.props.children)}}]),n}(s.Component),A=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=A.ReactCurrentOwner,_=A.ReactCurrentDispatcher;function I(){var e=s.useContext(D);if(!e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var t=s.useId();return s.useMemo((function(){var n;return null!=(n=R.current)?n:k(e,!1,(function(e){for(var n=e.memoizedState;n;){if(n.memoizedState===t)return!0;n=n.next}}))}),[e,t])}n(4585),n(258),n(4545);var F=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],V={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function N(e){var t=(0,c.c)(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(V).reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},n,t(n)))}),{}),connect:function(t){var n,r=e.getState(),a=r.set,c=r.events;null==c.disconnect||c.disconnect(),a((function(e){return{events:(0,i.Z)((0,i.Z)({},e.events),{},{connected:t})}})),Object.entries(null!=(n=c.handlers)?n:[]).forEach((function(e){var n=(0,o.Z)(e,2),r=n[0],a=n[1],i=(0,o.Z)(V[r],2),c=i[0],u=i[1];t.addEventListener(c,a,{passive:u})}))},disconnect:function(){var t,n=e.getState(),r=n.set,a=n.events;a.connected&&(Object.entries(null!=(t=a.handlers)?t:[]).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];if(a&&a.connected instanceof HTMLElement){var i=(0,o.Z)(V[n],1)[0];a.connected.removeEventListener(i,r)}})),r((function(e){return{events:(0,i.Z)((0,i.Z)({},e.events),{},{connected:void 0})}})))}}}var H=s.forwardRef((function(e,t){var n=e.children,a=e.fallback,d=e.resize,f=e.style,m=e.gl,v=e.events,p=void 0===v?N:v,g=e.eventSource,b=e.eventPrefix,y=e.shadows,E=e.linear,w=e.flat,x=e.legacy,M=e.orthographic,Z=e.frameloop,P=e.dpr,C=e.performance,O=e.raycaster,T=e.camera,z=e.onPointerMissed,k=e.onCreated,A=(0,r.Z)(e,F);s.useMemo((function(){return(0,c.e)(l)}),[]);var R=function(){var e,t,n=I(),r=s.useState((function(){return new Map})),a=(0,o.Z)(r,1)[0];a.clear();for(var i=n;i;){var c=null==(e=i.type)?void 0:e._context;c&&c!==D&&!a.has(c)&&a.set(c,null==(t=_.current)?void 0:t.readContext(L(c))),i=i.return}return s.useMemo((function(){return Array.from(a.keys()).reduce((function(e,t){return function(n){return s.createElement(e,null,s.createElement(t.Provider,j(S({},n),{value:a.get(t)})))}}),(function(e){return s.createElement(U,S({},e))}))}),[a])}(),V=h((0,i.Z)({scroll:!0,debounce:{scroll:50,resize:0}},d)),H=(0,o.Z)(V,2),B=H[0],Y=H[1],W=s.useRef(null),X=s.useRef(null),G=s.useState(null),K=(0,o.Z)(G,2),q=K[0],Q=K[1];s.useImperativeHandle(t,(function(){return W.current}));var $=(0,c.u)(z),J=s.useState(!1),ee=(0,o.Z)(J,2),te=ee[0],ne=ee[1],re=s.useState(!1),oe=(0,o.Z)(re,2),ae=oe[0],ie=oe[1];if(te)throw te;if(ae)throw ae;var ce=s.useRef(null);Y.width>0&&Y.height>0&&q&&(ce.current||(ce.current=(0,c.a)(q)),ce.current.configure({gl:m,events:p,shadows:y,linear:E,flat:w,legacy:x,orthographic:M,frameloop:Z,dpr:P,performance:C,raycaster:O,camera:T,size:Y,onPointerMissed:function(){return null==$.current?void 0:$.current.apply($,arguments)},onCreated:function(e){null==e.events.connect||e.events.connect(g?(0,c.i)(g)?g.current:g:X.current),b&&e.setEvents({compute:function(e,t){var n=e[b+"X"],r=e[b+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==k||k(e)}}),ce.current.render(s.createElement(R,null,s.createElement(c.E,{set:ie},s.createElement(s.Suspense,{fallback:s.createElement(c.B,{set:ne})},n))))),(0,c.b)((function(){Q(W.current)}),[]),s.useEffect((function(){if(q)return function(){return(0,c.d)(q)}}),[q]);var ue=g?"none":"auto";return s.createElement("div",(0,u.Z)({ref:X,style:(0,i.Z)({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ue},f)},A),s.createElement("div",{ref:B,style:{width:"100%",height:"100%"}},s.createElement("canvas",{ref:W,style:{display:"block"}},a)))})),B=s.forwardRef((function(e,t){return s.createElement(U,null,s.createElement(H,(0,u.Z)({},e,{ref:t})))}))},7494:function(e){function t(e,t,n){var r,o,a,i,c;function u(){var s=Date.now()-i;s<t&&s>=0?r=setTimeout(u,t-s):(r=null,n||(c=e.apply(a,o),a=o=null))}null==t&&(t=100);var s=function(){a=this,o=arguments,i=Date.now();var s=n&&!r;return r||(r=setTimeout(u,t)),s&&(c=e.apply(a,o),a=o=null),c};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(c=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},s}t.debounce=t,e.exports=t},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=58.1147cfa1.chunk.js.map